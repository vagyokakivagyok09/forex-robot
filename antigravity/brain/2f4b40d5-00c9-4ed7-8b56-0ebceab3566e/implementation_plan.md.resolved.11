# Spam Alert Fix Implementation Plan

## Goal
Prevent multiple alerts for the same breakout direction on the same day (whipsaw protection).

## Proposed Changes
### Core Logic ([app.py](file:///c:/Users/Tomi/.gemini/app.py))
#### [MODIFY] [app.py](file:///c:/Users/Tomi/.gemini/app.py)
- **Initialization**:
    - Check `if 'alert_history' not in st.session_state: st.session_state.alert_history = set()`.
- **[analyze_pair](file:///c:/Users/Tomi/.gemini/app.py#93-214) function**:
    - Construct `alert_id = f"{ticker}_{breakout_direction}_{last_day}"`.
    - Check `if alert_id in st.session_state.alert_history: return` (or skip sending).
    - If not in history AND crossover condition met:
        - Send Telegram.
        - Add `alert_id` to `st.session_state.alert_history`.

## Verification Plan
### Manual Verification
- Simulate a breakout.
- Verify alert sent.
- Simulate price coming back and breaking out again.
- Verify NO second alert sent.
