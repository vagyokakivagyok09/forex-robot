"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,o=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ownKeys(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ownKeys(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}angular.module("tippmixCommonDirectives",[]),angular.module("tippmixCommonFilters",[]),angular.module("tippmixCommonServices",[]),angular.module("tippmixCommonWidgets",[]),angular.module("tippmixCommon",["SCP","ngCookies","ngDialog","ngStorage","tippmixHttp","tippmixBetslip","tippmixBetradar","tippmixUtilities","tippmixCommonDirectives","tippmixCommonFilters","tippmixCommonServices","tippmixCommonWidgets"]).constant("settings",{apiUri:CONSTS.API_URI,vSportApiUrl:CONSTS.V_SPORT_API_URL,homePageUrl:CONSTS.HOMEPAGE_URL,rowDisplaySportIds:CONSTS.ROWS_DISPLAY_SPORT_IDS,betradarUrl:CONSTS.BETRADAR_URL,betradarVSportUrl:CONSTS.BETRADAR_VSPORT_URL,betradarVSportUrlTab2:CONSTS.BETRADAR_VSPORT_URL_TAB2,loginLayerUrl:CONSTS.LOGIN_LAYER_URL,redirectUrl:CONSTS.REDIRECT_URL,eventPageUrl:CONSTS.EVENT_PAGE_URL,liveEventPageUrl:CONSTS.LIVE_EVENT_PAGE_URL,sportNames:CONSTS.SPORT_NAMES,allNames:CONSTS.ALL_NAMES,csrf:CONSTS.CSRF,betradarLiveUrl:CONSTS.BETRADAR_LIVE_URL,eventsResultsSelect:CONSTS.EVENTS_RESULTS_SELECT,bettingUrl:CONSTS.BETTING_URL,isLir:CONSTS.IS_LIR,bestCombinationPrintUrl:CONSTS.BEST_COMBINATION_PRINT_URL,bettingPrintUrl:CONSTS.BETTING_PRINT_URL,bestGamesPrintUrl:CONSTS.BEST_GAMES_PRINT_URL,custombetOffersPrintUrl:CONSTS.CUSTOMBET_OFFER_PRINT_URL,isMobile:CONSTS.IS_MOBILE}).run(["$rootScope","settings","betslipSettings","ngDialog","betslipStorage","betslipApi",function(e,t,n,a,i,o){n.set({maxCount:CONSTS.BETSLIP.MAX_COUNT,maxCountErrorMessage:CONSTS.BETSLIP.MAX_COUNT_ERROR_MESSAGE.replace(/{MAX_COUNT}/g,CONSTS.BETSLIP.MAX_COUNT),defaultErrorMessage:CONSTS.BETSLIP.DEFAULT_ERROR_MESSAGE,minSingleStake:CONSTS.BETSLIP.MIN_SINGLE_STAKE,minMultipleStake:CONSTS.BETSLIP.MIN_MULTIPLE_STAKE,minMultipleTotalStake:CONSTS.BETSLIP.MIN_MULTIPLE_TOTAL_STAKE,totalOddsAccuracy:CONSTS.TOTAL_ODDS_ACCURACY,prizeAmountRoundingValue:CONSTS.PRIZE_AMOUNT_ROUNDING_VALUE,prizeAmountRoundingMethod:CONSTS.PRIZE_AMOUNT_ROUNDING_METHOD,prizeAmountRoundingLevel:CONSTS.PRIZE_AMOUNT_ROUNDING_LEVEL,minStakeType:CONSTS.MIN_STAKE_TYPE,minStakeWager:CONSTS.MIN_STAKE_WAGER,vSportMinStakeType:CONSTS.V_SPORT_MIN_STAKE_TYPE,vSportMinStakeWager:CONSTS.V_SPORT_MIN_STAKE_WAGER}),e.bettingUrl=t.bettingUrl,e.$on("betslip.confirmWager",function(e,t){var n=null,n=t.vSport?"vSport":t.event.isLive?"live":"prematch";a.open({template:"betslipWagerWarning",className:"ngdialog-betslip",showClose:!1,closeByEscape:!1,closeByDocument:!1,controller:["$scope",function(e){e.continueBetting=function(){i.data[n].wagerIdCounter=2,i.data[n].wagerId=null,i.toggleItem(t.event,t.markets,t.outcome,t.vSport),e.closeThisDialog()}}]})}),e.$on("betslip.defaultError",function(){setTimeout(function(){a.open({template:"defaultErrorDialog",showClose:!1})})}),e.$on("betslip.prematchMaxCountError",function(){setTimeout(function(){a.open({template:"prematchMaxCountErrorDialog",showClose:!1})})}),e.$on("betslip.liveMaxCountError",function(){setTimeout(function(){a.open({template:"liveMaxCountErrorDialog",showClose:!1})})}),e.$on("betslip.vSportMaxCountError",function(){setTimeout(function(){a.open({template:"vSportMaxCountErrorDialog",showClose:!1})})}),e.$on("betslip.calculateCallError",function(){setTimeout(function(){a.open({template:"calculateCallError",showClose:!1})})}),e.$on("betslip.calculateCallErrorNoAddItem",function(){setTimeout(function(){a.open({template:"calculateCallErrorNoAddItem",showClose:!1})})}),e.$on("betslip.customBetMaxCountError",function(){setTimeout(function(){a.open({template:"customBetMaxCountError",showClose:!1})})}),e.$on("betslip.customBetMaxBetslipCountError",function(){setTimeout(function(){a.open({template:"customBetMaxBetslipCountError",showClose:!1})})}),o.init()}]),function(){function e(e,n){function a(e,t){n.sportNames[t]&&(e.sportName=n.sportNames[t].sportName),e.sportName&&0!==t||(e.sportName="menu")}return{restrict:"E",replace:!0,scope:{sportId:"="},link:function(t){a(t,t.sportId);var e=t.$watch("sportId",function(e){a(t,e)});t.$on("$destroy",function(){e()})},template:'<span class="ico ico-{{sportName}}"></span>'}}e.$inject=["$compile","settings"],angular.module("tippmixCommonDirectives").directive("sportIcons",e)}(),function(){function e(i,o){return{restrict:"E",link:function(e,t,n){n.vSport=!!n.vSport;var a=e.$watch("event",function(){angular.isUndefined(e.event)||(e.isActive=o.betradarLink.isActive(e.event),n.vSport?(0===parseInt(n.tabIndex,10)&&(e.url=i.betradarVSportUrl.replace("{sport}",e.event.sportId-300).replace("{match}",e.event.betradarId)),1===parseInt(n.tabIndex,10)&&(e.url=i.betradarVSportUrlTab2.replace("{sport}",e.event.sportId-300).replace("{match}",e.event.betradarId))):e.url=o.betradarLink.getUrl(e.event,i.betradarUrl))});e.$on("$destroy",function(){a()})},replace:!0,scope:{event:"="},template:'<a class="link-betradar" ng-show="isActive" href="{{url}}" target="_blank"><span class="ico ico-statisztika"></span></a>'}}e.$inject=["settings","tippmixUtilities"],angular.module("tippmixCommonDirectives").directive("betradarLink",e)}(),function(){function e(l,c,d){return{restrict:"AE",scope:{event:"=event"},link:function(e,t,n){var a="",i="true"===n.displayLiveIcon,o="true"===n.hideBetradar,r=(e.className=angular.isDefined(n.class)?n.class:"",n.vSport=!!n.vSport,n.forceLink||d.eventPageLink.hasVisibleMarket(e.event)?(r="",r=e.event.isLive?c.liveEventPageUrl:c.eventPageUrl,n.noLink?a+='<span ng-class="className">':a+='<a href="'+r+'{{event.eventId}}" ng-class="className">',a=(a+='<span class="highlight" ng-class="{\'with-webnote\': event.webNote}">{{event.sportName}}, ')+d.getCompetitionsNames(e.event).join(", ")+'</span><div ng-if="event.webNote" ng-click="$event.preventDefault(); $event.stopPropagation()" class="webnote-tooltip" tooltip="tooltip-content" options="{ track: false, position: { my: \'center bottom-15\', at: \'center bottom-8\', } }"><div class="icon fa fa-info"></div><div tooltip-content>{{event.webNote}}</div></div><br><span class="name">{{event.eventName | textCleaning}}</span>',e.event.isLive&&i&&(a+=' <span class="ico ico-villam"></span>'),a+='<br><span class="highlight"><span class="date">{{event.eventDate | date:\'MM.dd. HH:mm\'}}</span>',!n.forceLink&&!e.event.isOutright&&null!==e.event.markets&&0!==e.event.markets.length&&null!==e.event.markets[0].outcomes&&e.event.markets[0].outcomeCount<=3&&1<e.event.markets[0].minCombiCountLrt?a+=',</span><span class="min-combi-count"> MK: {{event.markets[0].minCombiCountLrt}}</span>':a+="</span>",n.noLink?a+="</span>":a+="</a>"):(a=(a+='<span ng-class="className"><span class="highlight">{{event.sportName}}, ')+d.getCompetitionsNames(e.event).join(", ")+'</span><div ng-if="event.webNote" ng-click="$event.preventDefault(); $event.stopPropagation()" class="webnote-tooltip" tooltip="tooltip-content" options="{ track: false, position: { my: \'center bottom-15\', at: \'center bottom-8\', } }"><div class="icon fa fa-info"></div><div tooltip-content>{{event.webNote}}</div></div><br><span class="name">{{event.eventName | textCleaning}}</span>',e.event.isLive&&i&&(a+=' <span class="ico ico-villam"></span>'),a+='<br><span class="highlight"><span class="date">{{event.eventDate | date:\'MM.dd. HH:mm\'}}</span></span></span>'),c.isMobile&&(o||(n.vSport?a+='<betradar-link event="event" v-sport="true"></betradar-link>':a+='<betradar-link event="event"></betradar-link>'),a+='<custombet-link event="event"></custombet-link>'),angular.element(a)),i=l(r)(e),s=t.replaceWith(i);e.$on("$destroy",function(){s.empty()})}}}function t(s,l,c){return{restrict:"AE",scope:{event:"=event"},link:function(e,t,n){var a="",i="true"===n.displayLiveIcon,o=(e.className=angular.isDefined(n.class)?n.class:"",n.vSport=!!n.vSport,n.forceLink||c.eventPageLink.hasVisibleMarket(e.event)?(o="",o=e.event.isLive?l.liveEventPageUrl:l.eventPageUrl,n.noLink?a+='<span ng-class="className">':a+='<a href="'+o+'{{event.id}}" ng-class="className">',a=(a+='<span class="highlight" ng-class="{\'with-webnote\': event.webNote}">{{event.sport.name}}, ')+c.getCompetitionsNames(e.event).join(", ")+'</span><div ng-if="event.webNote" ng-click="$event.preventDefault(); $event.stopPropagation()" class="webnote-tooltip" tooltip="tooltip-content" options="{ track: false, position: { my: \'center bottom-15\', at: \'center bottom-8\', } }"><div class="icon fa fa-info"></div><div tooltip-content>{{event.webNote}}</div></div><br><span class="name">{{event.name | textCleaning}}</span>',e.event.isLive&&i&&(a+=' <span class="ico ico-villam"></span>'),a+='<br><span class="highlight"><span class="date">{{event.date | date:\'MM.dd. HH:mm\'}}</span>',!n.forceLink&&!e.event.isOutright&&null!==e.event.market&&null!==e.event.market.outcomes&&e.event.market.outcomeCount<=3&&1<e.event.market.minCombiCount?a+=',</span><span class="min-combi-count"> MK: {{event.market.minCombiCount}}</span>':a+="</span>",n.noLink?a+="</span>":a+="</a>"):(a=(a+='<span ng-class="className"><span class="highlight">{{event.sport.name}}, ')+c.getCompetitionsNames(e.event).join(", ")+'</span><div ng-if="event.webNote" ng-click="$event.preventDefault(); $event.stopPropagation()" class="webnote-tooltip" tooltip="tooltip-content" options="{ track: false, position: { my: \'center bottom-15\', at: \'center bottom-8\', } }"><div class="icon fa fa-info"></div><div tooltip-content>{{event.webNote}}</div></div><br><span class="name">{{event.name | textCleaning}}</span>',e.event.isLive&&i&&(a+=' <span class="ico ico-villam"></span>'),a+='<br><span class="highlight"><span class="date">{{event.date | date:\'MM.dd. HH:mm\'}}</span></span></span>'),l.isMobile&&(n.vSport?a+='<betradar-link event="event" v-sport="true"></betradar-link>':a+='<betradar-link event="event"></betradar-link>',a+='<custombet-link event="event"></custombet-link>'),angular.element(a)),i=s(o)(e),r=t.replaceWith(i);e.$on("$destroy",function(){r.empty()})}}}function n(a,i){return{restrict:"AE",replace:!0,scope:{event:"=event"},link:function(e,t,n){e.className=angular.isDefined(n.class)?n.class:"",e.upcoming=!!n.upcoming,e.hasMarketWithVisibleOdds=i.eventPageLink.hasMarketWithVisibleOdds(e.event),e.remainingCount=e.event.totalMarketCount,e.event.isLive?e.url=a.liveEventPageUrl:e.url=a.eventPageUrl,e.hasMarketWithVisibleOdds&&!e.upcoming&&e.remainingCount--},template:'<a ng-show="remainingCount" href="{{url}}{{event.eventId}}" title="{{hasMarketWithVisibleOdds && !upcoming ? \'+\' + remainingCount + \' fogadás\' : remainingCount + \' fogadás\'}}" ng-class="className"><span ng-if="hasMarketWithVisibleOdds && !upcoming">+</span>{{remainingCount}} <span class="ico ico-nyil-jobb"></span></a>'}}e.$inject=["$compile","settings","tippmixUtilities"],t.$inject=["$compile","settings","tippmixUtilities"],n.$inject=["settings","tippmixUtilities"],angular.module("tippmixCommonDirectives").directive("eventPageLink",e).directive("eventPageLinkIcon",n).directive("eventPageLinkNew",t)}(),function(){function e(m,u){return{restrict:"AE",scope:{event:"=event",marketFilter:"="},link:function(o,e,r){o.hdv=["H","D","V"],r.noButton="true"===r.noButton,r.vSport="true"===r.vSport,r.showOutcomeName="true"===r.showOutcomeName,r.superOdds="true"===r.superOdds,r.betslipSuperOdds="true"===r.betslipSuperOdds,r.superOdds&&(r.showOutcomeName=!0);var s=angular.element(document.createComment("outcomes")),l=e.parent(),c=(e.replaceWith(s),[]);function d(){for(var e=0;e<c.length;e++){var t=c[e];t.parentNode&&t.parentNode.removeChild(t)}c=[]}function t(){d();var e=function(){var e="";if(o.marketFilter&&!o.marketFilter.default&&0===o.event.markets.length)e='\n\t\t\t\t\t\t<td class="odds"><div class="btn-odds-container"><div class="locked"><span></span></div></div></td>\n\t\t\t\t\t\t<td class="odds"><div class="btn-odds-container"><div class="locked"><span></span></div></div></td>\n\t\t\t\t\t\t<td class="odds"><div class="btn-odds-container"><div class="locked"><span></span></div></div></td>\n\t\t\t\t\t';else if(!r.superOdds&&u.outcomes.hasVisibleMarket(o.event))e='<td colspan="3"></td>';else if(Array.isArray(o.event.markets)&&0<o.event.markets.length&&o.event.markets[0]&&null!==o.event.markets[0].outcomes&&o.event.markets[0].outcomeCount<=3)if(angular.isArray(o.event.markets[0].outcomes)&&0!==o.event.markets[0].marketStatus){var t=o.event.markets[0].outcomes.length;if(2===t||3===t)for(var n,a,i=0;i<3;i++)2===t&&1===i?e+='<td class="odds"></td>':(n=2===t&&2===i?1:i,a=o.marketFilter&&!o.marketFilter.default?o.event.markets[0].outcomes[n].outcomeName:o.hdv[i],e+='\n\t\t\t\t\t\t\t\t\t\t<td class="odds">\n\t\t\t\t\t\t\t\t\t\t\t<fixed-odds\n\t\t\t\t\t\t\t\t\t\t\t\tevent="event"\n\t\t\t\t\t\t\t\t\t\t\t\tmarket="event.markets[0]"\n\t\t\t\t\t\t\t\t\t\t\t\toutcome="event.markets[0].outcomes[\''.concat(n,'\']"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="').concat(a,'"\n\t\t\t\t\t\t\t\t\t\t\t\tshow-outcome-name="').concat(r.showOutcomeName,'"\n\t\t\t\t\t\t\t\t\t\t\t\tno-button="').concat(r.noButton,'"\n\t\t\t\t\t\t\t\t\t\t\t\tv-sport="').concat(r.vSport,'"\n\t\t\t\t\t\t\t\t\t\t\t\thide-crossed="').concat(r.betslipSuperOdds,'"\n\t\t\t\t\t\t\t\t\t\t\t\tshow-title="').concat(o.marketFilter&&!o.marketFilter.default,'"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t</fixed-odds>\n\t\t\t\t\t\t\t\t\t\t</td>'));else e=""}else e='<td colspan="3"></td>';else Array.isArray(o.event.markets)&&0<o.event.markets.length&&o.event.markets[0]&&null!==o.event.markets[0].outcomes&&3<o.event.markets[0].outcomeCount&&r.superOdds?e+='\n\t\t\t\t\t\t<td class="odds">\n\t\t\t\t\t\t\t<fixed-odds\n\t\t\t\t\t\t\t\tevent="event"\n\t\t\t\t\t\t\t\tmarket="event.markets[0]"\n\t\t\t\t\t\t\t\toutcome="event.markets[0].outcomes"\n\t\t\t\t\t\t\t\tsingle-value="'.concat(r.superOdds,'"\n\t\t\t\t\t\t\t\tshow-outcome-name="').concat(r.showOutcomeName,'"\n\t\t\t\t\t\t\t\tno-button="').concat(r.noButton,'"\n\t\t\t\t\t\t\t\tv-sport="').concat(r.vSport,'"\n\t\t\t\t\t\t\t\thide-crossed="').concat(r.betslipSuperOdds,'"\n\t\t\t\t\t\t\t\tsuper-odds="true"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</fixed-odds>\n\t\t\t\t\t\t</td>'):e='<td colspan="3"></td>';return e}();if(e)for(var e=angular.element(e),t=m(e)(o),n=s[0].nextSibling,a=0;a<t.length;a++){var i=t[a];l[0].insertBefore(i,n),c.push(i)}}t(),o.$watch("marketFilter",function(){t()},!0),o.$on("$destroy",function(){d()})}}}function t(m){return{restrict:"A",scope:{oddsList:"="},link:function(e,t,n){var a='<td colspan="3"></td>';if(null!==e.oddsList&&!angular.isUndefined(e.oddsList)){var i=e.oddsList.length;if(2===i||3===i)for(var o,r,s,a="",l=0;l<3;l++)2===i&&1===l?a+='<td class="odds"></td>':(r="",e.oddsList[o=2===i&&2===l?1:l].outcomeNo.toString()===n.selectedOutcomeNo&&(r=" state-selected"),s="",1<e.oddsList[o].odds&&(s="{{oddsList["+o+"].odds | number:2}}<br>{{oddsList["+o+"].outcomeName}}"),a+='<td class="odds'.concat(r,'"><div>').concat(s,"</div></td>"))}var c=angular.element(a),c=m(c)(e),d=t.replaceWith(c);e.$on("$destroy",function(){d.empty()})}}}function n(u){return{restrict:"A",scope:{oddsList:"="},link:function(e,t,n){var a='<td colspan="3"></td>';if(null!==e.oddsList&&!angular.isUndefined(e.oddsList)){var i=e.oddsList.length;if(2===i||3===i)for(var o,r,a="",s=0;s<3;s++)2===i&&1===s?a+='<td class="odds"><div></div></td>':(r="",e.oddsList[o=2===i&&2===s?1:s].realNo.toString()===n.selectedOutcomeNo&&(r=" state-selected"),c="",1<e.oddsList[o].fixedOdds&&(c="{{oddsList["+o+"].fixedOdds | number:2}}<br>{{oddsList["+o+"].name}}"),a+='<td class="odds'.concat(r,'"><div>').concat(c,"</div></td>"));else if(3<i){a="";for(var l,c,s=0;s<i;s++)0===s||1===s?a+='<td class="odds"></td>':2===s&&(c="",1<(l=e.oddsList.find(function(e){return e.isRecommended})).fixedOdds&&(c="{{"+l.fixedOdds+" | number:2}}<br>"+l.name),a+='<td class="odds state-selected"><div>'.concat(c,"</div></td>"))}}var d=angular.element(a),d=u(d)(e),m=t.replaceWith(d);e.$on("$destroy",function(){m.empty()})}}}e.$inject=["$compile","tippmixUtilities"],t.$inject=["$compile"],n.$inject=["$compile"],angular.module("tippmixCommonDirectives").directive("outcomes",e).directive("bestCombinationOutcome",t).directive("custombetOffersOutcome",n)}(),function(){function e(d,m,u){return{restrict:"AE",scope:{event:"=event",market:"=market",outcome:"=outcome",text:"@text"},link:function(t,e,n){n.noButton="true"===n.noButton,n.vSport="true"===n.vSport&&n.vSport,n.showOutcomeName="true"===n.showOutcomeName,n.singleValue="true"===n.singleValue,n.hideCrossed="true"===n.hideCrossed,n.superOdds="true"===n.superOdds,n.showTitle="true"===n.showTitle;var a,i,o,r,s=void 0!==t.event,l=void 0!==t.market,c=void 0!==t.outcome;n.singleValue&&(t.outcome=t.outcome.find(function(e){return e.normalOdds})),s&&l&&c&&(t.toggleItem=function(e,t,n,a){u.toggleItem(e,t,n,a)},a=t.event.eventId+"-"+t.market.marketId+"-"+t.outcome.outcomeNo,u.itemIsExists(a)?t.isExist=!0:t.isExist=!1,u.disabledOddsByCustombet(t.event.eventId,t.market.marketId,t.outcome.outcomeNo,t.event.isLive)?t.isDisabled=!0:t.isDisabled=!1,i=m.$on("betslip.addItem",function(){var e;u.itemIsExists(a)?t.isExist=!0:t.isExist=!1,u.disabledOddsByCustombet(null==(e=t.event)?void 0:e.eventId,null==(e=t.market)?void 0:e.marketId,null==(e=t.outcome)?void 0:e.outcomeNo,null==(e=t.event)?void 0:e.isLive)?t.isDisabled=!0:t.isDisabled=!1}),o=m.$on("betslip.removeItem",function(){u.itemIsExists(a)?t.isExist=!0:t.isExist=!1,u.disabledOddsByCustombet(t.event.eventId,t.market.marketId,t.outcome.outcomeNo,t.event.isLive)?t.isDisabled=!0:t.isDisabled=!1}),l=s="",n.showOutcomeName&&!n.singleValue&&t.outcome?l=t.outcome.outcomeName:t.text&&(l=t.text),n.superOdds&&(n.singleValue=!1,l=t.outcome.outcomeName),c='\n\t\t\t\t\t\t<span class="normal">\n\t\t\t\t\t\t\t{{outcome.fixedOdds | number:2}}<br>\n\t\t\t\t\t\t\t<div>'.concat(l,"</div>\n\t\t\t\t\t\t</span>"),t.outcome.normalOdds&&!n.hideCrossed&&(c+='\n\t\t\t\t\t\t<span class="crossed">\n\t\t\t\t\t\t\t{{outcome.normalOdds | number:2}}\n\t\t\t\t\t\t</span>'),s=n.noButton?'\n\t\t\t\t\t\t<span class="btn-odds btn-odds--stacked">\n\t\t\t\t\t\t\t'.concat(c,"\n\t\t\t\t\t\t</span>"):'\n\t\t\t\t\t\t<div class="btn-odds-container">\n\t\t\t\t\t\t\t'.concat(n.singleValue?'<span class="text">'.concat(t.outcome.outcomeName,"</span>"):"",'\n\t\t\t\t\t\t\t<button ng-click="toggleItem(event, market, outcome, ').concat(n.vSport,')" class="btn-odds btn-odds--stacked" ng-class="{\'active\': isExist}" ng-disabled="isDisabled && !isExist"} title="').concat(n.showTitle?l:"",'">\n\t\t\t\t\t\t\t\t').concat(c,"\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>"),-1!==t.market.marketStatus&&-1!==t.event.bettingStatus&&-2!==t.market.marketStatus||(s='\n\t\t\t\t\t\t<span class="btn-odds btn-odds--stacked disabled">\n\t\t\t\t\t\t\tFelfügg.\n\t\t\t\t\t\t\t'.concat(t.text?"<br>{{text}}":"","\n\t\t\t\t\t\t</span>")),t.outcome.fixedOdds<=1&&(s=""),n=angular.element(s),l=d(n)(t),r=e.replaceWith(l),t.$on("$destroy",function(){i(),o(),r.empty()}))}}}e.$inject=["$compile","$rootScope","betslipStorage"],angular.module("tippmixCommonDirectives").directive("fixedOdds",e)}(),function(){function e(a){return{restrict:"A",scope:{eventDatetime:"=remainingTime",realDatetime:"=realDatetime"},link:function(e){var t=(n=a.remainingTime.getTimes(e.eventDatetime,e.realDatetime)).hour,n=n.minute;t<0||n<0?e.remainingTime="00:00":(t=t.toString(),n=n.toString(),1===t.length&&(t="0"+t),1===n.length&&(n="0"+n),e.remainingTime=t+":"+n)},template:"{{remainingTime}}"}}e.$inject=["tippmixUtilities"],angular.module("tippmixCommonDirectives").directive("remainingTime",e)}(),function(){function e(l){return{restrict:"E",scope:{type:"@",event:"=",market:"="},link:function(e,t,n){var a="",i=e.type,o=e.event,r=null;if(n.superOdds="true"===n.superOdds,e.market?r=e.market.marketRealNo:(n.superOdds||Array.isArray(o.markets)&&0<o.markets.length&&o.markets[0]&&null!==o.markets[0].outcomes&&o.markets[0].outcomeCount<=3)&&(r=o.markets[0].marketRealNo),null!==r){if("v-sport"===i)for(r+="";r.length<6;)r="0"+r;a=o.isLive?a+("<span>"+r.substr(0,3))+"</span><span>"+r.substr(3,3)+"</span>":"<span>"+r+"</span>";var n=angular.element(a),i=l(n)(e),s=t.replaceWith(i);e.$on("$destroy",function(){s.empty()})}}}}e.$inject=["$compile"],angular.module("tippmixCommonDirectives").directive("no",e)}(),angular.module("tippmixCommonDirectives").directive("numbersOnly",function(){return{restrict:"A",link:function(e,t,n){n.numbersOnly?t.on("input.numbers-only",function(e){var e=angular.element(e.target),t=e.get(0),n=e.val(),a=t.selectionStart,i=t.selectionEnd,o=/[^0-9]/g;o.test(n)&&(e.val(n.replace(o,"")),t.setSelectionRange(--a,--i)),e.trigger("change")}):t.on("keypress.numbers-only",function(e){var t;(t=e).metaKey||t.ctrlKey||32!==t.which&&(0===t.which||(t.which<33||(t=String.fromCharCode(t.which),/[\d\s]/.test(t))))||e.preventDefault()}),e.$on("$destroy",function(){t.off("input.numbers-only"),t.off("keypress.numbers-only")})}}}),function(){function e(l,c,d){function m(e,t,n,a){n=n||!1,a=a||!1,e.minStakeError=t=t||!1,e.maxStakeError=n,e.stakeFormatError=a}function u(e,t,n){"prematch"===t?e.$parent.isPrematchStakeError=n:"live"===t?e.$parent.isLiveStakeError=n:"vSport"===t&&(e.$parent.isVSportStakeError=n)}return{restrict:"E",link:function(n,e,t){var a,i,o=t.type;if("prematch"===o)a=d.minPrematchStake,i=d.maxPrematchStake;else if("live"===o)a=d.minLiveStake,i=d.maxLiveStake;else{if("vSport"!==o)return;a=d.minVSportStake,i=d.maxVSportStake}m(n);var r,t=c(e.find("input").attr("ng-model")),s=n.$watch(t,function(e){var t;l.cancel(r),angular.isUndefined(e)||null===e||(0<(e=e.toString()).length?(t=parseInt(e),"0"!==e[e.length-1]||"live"===o&&"0"!==e[e.length-2]?(u(n,o,!0),r=l(function(){m(n,!1,!1,!0)},500)):t<a?(u(n,o,!0),r=l(function(){m(n,!0,!1,!1)},500)):i<t?(u(n,o,!0),r=l(function(){m(n,!1,!0,!1)},500)):(m(n),u(n,o,!1))):(m(n),u(n,o,!1)))});n.$on("$destroy",function(){s()})}}}e.$inject=["$timeout","$parse","betslipSettings"],angular.module("tippmixCommonDirectives").directive("inputStake",e)}(),function(){function e(i){return{restrict:"E",link:function(e,t,n){var a;e.event&&(a=e.event.scoreResults)&&(n=e.$eval(n.texts),e.scoreboard=i.eventResultsScoreboard.getScoreboard(e.event,a,n))},scope:{event:"="},template:"{{scoreboard}}"}}e.$inject=["tippmixUtilities"],angular.module("tippmixCommonDirectives").directive("eventResultsScoreboard",e)}(),function(){function e(i){return{scope:{options:"=options"},link:function(e,t,n){var a={items:"[tooltip]",content:function(){return angular.element(this).find("[tooltip-content]").html()},track:!0,show:{delay:0,duration:0},hide:{delay:0,duration:0},open:function(e,t){angular.element(this).addClass("is-open")},close:function(e,t){angular.element(this).removeClass("is-open")}};n.options&&angular.extend(a,e.options||{}),n.tooltip&&(a.tooltipClass=n.tooltip),angular.element(t).tooltip(a),angular.element(window).on("resize.tooltip",function(){angular.element(t).hasClass("is-open")&&(angular.element(t).tooltip("close"),i(function(){angular.element(t).tooltip("open")},0))}),e.$on("$destroy",function(){angular.element(window).off("resize.tooltip")})}}}e.$inject=["$timeout"],angular.module("tippmixCommonDirectives").directive("tooltip",e)}(),function(){function e(e,s,t,l){return{restrict:"E",link:function(n,e,t,a){var i=angular.element(e),o=isNaN(parseInt(t.interval,10))?5e3:t.interval,r=null;n.src="",n.$on("$destroy",function(){r&&r.dispose&&r.dispose()}),function t(){s({url:"/ajax/Lovilive?isLive=1"}).then(function(e){e.data.isLive?n.src||s({url:"/ajax/Lovilive?getLoviStream=1"}).then(function(e){(e=e.data).loviStream&&(n.src=e.loviStream,l(function(){(r=window.videojs(i.find("video").get(0))).src({src:n.src,controlBar:{fullscreenToggle:!1}}),r.ready(function(){r.tech_.off("dblclick")})}))}):n.src="",l(function(){t()},o)})}()},scope:{interval:"@"},template:'<div ng-if="src" class="lovi-stream"><video class="video-js" preload="true" controls playsinline disablePictureInPicture></div>'}}e.$inject=["settings","$http","$interval","$timeout"],angular.module("tippmixCommonDirectives").directive("loviStream",e)}(),angular.module("tippmixCommonDirectives").directive("collapsible",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="collapsible"><div class="collapsible-header" ng-click="toggle()"><span class="collapsible-title">{{title}}</span><div class="collapsible-toggle"><span ng-if="isOpen" class="fa fa-chevron-up"></span><span ng-if="!isOpen" class="fa fa-chevron-down"></span></div></div><div ng-if="isOpen" class="collapsible-body" ng-transclude></div></div>',scope:{title:"@",isOpen:"=?",onOpen:"=?",onClose:"=?"},link:function(e,t){e.isOpen&&e.onOpen&&e.onOpen(),e.toggle=function(){e.isOpen=!e.isOpen,e.isOpen&&e.onOpen?e.onOpen():e.onClose&&e.onClose()}}}}),function(){function e(i,e,o,r){return{restrict:"A",scope:{event:"=event",pollingTime:"=pollingTime"},link:function(t,e,n){var a={name:"v-sport-market/"+t.event.eventId,url:r.vSportApiUrl+"tippmix/event",defaultDatetime:"0001-01-01T00:00:00.000Z",pollingTime:t.pollingTime};t.$on("$destroy",function(){o.stopPolling(a.name)}),o.startPolling({name:a.name,url:a.url,pollingTime:a.pollingTime,params:{eventId:t.event.eventId},noApiUri:!0},function(e){i(function(){t.event.markets=e.data[0].markets})})}}}e.$inject=["$timeout","tippmixUtilities","httpService","settings"],angular.module("tippmixCommonDirectives").directive("vSportMarkets",e)}(),function(){function e(e,t){return{restrict:"AE",replace:!0,scope:{event:"=event"},link:function(a,e,t){a.$watch(function(){return a.event},function(e,t){var n={};e&&(n=e.competitions[0],e.competitions.forEach(function(e){"alias"===e.type&&(n=e)})),a.competition=n})},template:"<span>{{competition.name}}</span>"}}e.$inject=["settings","tippmixUtilities"],angular.module("tippmixCommonDirectives").directive("competitionName",e)}(),function(){function e(e,i){return{restrict:"E",link:function(e,t,n){n.vSport=!!n.vSport;var a=e.$watch("event",function(){angular.isUndefined(e.event)||(e.isActive=i.custombetLink.isActive(e.event))});e.$on("$destroy",function(){a()})},replace:!0,scope:{event:"="},template:'<div class="link-custombet" ng-show="isActive"><span class="ico ico-custombet"></span></div>'}}e.$inject=["settings","tippmixUtilities"],angular.module("tippmixCommonDirectives").directive("custombetLink",e)}(),function(){function e(o,e){return{restrict:"E",link:function(t,n,e){var a=_slicedToArray(t.zone.properties.split("|"),2),i=(a[0],a[1]);t.getAsset=function(e){return e.banner.assets[Object.keys(e.banner.assets)[0]]},o(function(){var e=new Glide(n[0],{type:"carousel",perView:1,focusAt:"center",gap:0,autoplay:1<t.zone.placements.length&&(i?1e3*i:6e3),hoverpause:!0,swipeThreshold:80,dragThreshold:120});e.mount(),t.$on("$destroy",function(){e&&e.destroy()})},0)},replace:!0,scope:{zone:"="},template:'\n\t\t\t\t<div class="banner-carousel">\n\t\t\t\t\t<div class="glide__track" data-glide-el="track">\n\t\t\t\t\t\t<ul class="banner-carousel__slides">\n\t\t\t\t\t\t\t<li ng-repeat="slide in zone.placements track by $index" class="banner-carousel__slide">\n\t\t\t\t\t\t\t\t<a ng-href="{{slide.banner.targetUrl}}" target="{{slide.banner.target_type}}">\n\t\t\t\t\t\t\t\t\t<img ng-src="{{getAsset(slide).location}}" alt="{{slide.banner.name}}">\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-show="zone.placements.length > 1" class="banner-carousel__bullets" data-glide-el="controls[nav]">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tng-repeat="slide in zone.placements track by $index"\n\t\t\t\t\t\t\tclass="banner-carousel__bullet"\n\t\t\t\t\t\t\tdata-glide-dir="={{$index}}"\n\t\t\t\t\t\t></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t'}}e.$inject=["$timeout","settings"],angular.module("tippmixCommonDirectives").directive("bannerCarousel",e)}(),function(){function e(a){return{restrict:"A",link:function(e,t,n){a(function(){$(t).mCustomScrollbar({advanced:{updateOnContentResize:!0}})},0)}}}e.$inject=["$timeout"],angular.module("tippmixCommonDirectives").directive("customScrollbar",e)}(),angular.module("tippmixCommonDirectives").directive("oddsRange",function(){return{restrict:"A",require:"ngModel",priority:101,scope:{minModel:"=?",maxModel:"=?",oddsRange:"=?"},link:function(n,a,i,o){var r;function s(e){return parseFloat(String(e).replace(",","."))}function l(e){if(!(void 0!==n.minModel&&e<parseFloat(n.minModel)||void 0!==n.maxModel&&e>parseFloat(n.maxModel))){if(void 0!==n.oddsRange&&!isNaN(parseFloat(n.oddsRange))){var t=parseFloat(n.oddsRange);if(void 0!==n.minModel&&void 0===n.maxModel&&t<e)return;if(void 0!==n.maxModel&&void 0===n.minModel&&e<t)return}return 1}}function c(e){if(isNaN(e))return"";var t=e.toFixed(2).replace(".",",");return void 0!==i.showPlus&&"false"!==i.showPlus&&10<=e&&(t+=" +"),t}var d=i.hasOwnProperty("minModel"),m=i.hasOwnProperty("maxModel");o.$parsers.push(function(e){if(null==e||""===e)return e;var t=String(e).replace("+","").replace(",",".").replace(/[^0-9.]/g,""),t=Number(t);if(String(e).match(/,$/)||String(e).match(/\.\d*$/)||m&&void 0!==n.oddsRange&&String(e).length<String(n.oddsRange).length)return e;if(!isNaN(t)){if(m&&void 0!==n.maxModel&&t>parseFloat(n.maxModel))return t=parseFloat(n.maxModel),o.$setViewValue(t),o.$render(),a.val(c(t)),t;if(d&&void 0!==n.minModel&&t<parseFloat(n.minModel))return o.$setViewValue(r),o.$render(),a.val(c(r)),r;if(d&&void 0!==n.oddsRange&&!isNaN(parseFloat(n.oddsRange)))if(parseFloat(n.oddsRange)<t)return o.$setViewValue(r),o.$render(),a.val(c(r)),r;if(m&&void 0!==n.oddsRange&&!isNaN(parseFloat(n.oddsRange)))if(t<parseFloat(n.oddsRange))return o.$setViewValue(r),o.$render(),a.val(c(r)),r;return l(t)&&(r=t),t}}),a.on("blur",function(){var e=o.$viewValue,t=s(e);l(t=e&&!isNaN(t)?t:m?void 0!==n.maxModel&&!isNaN(parseFloat(n.maxModel))&&0<parseFloat(n.maxModel)?parseFloat(n.maxModel):10:d&&void 0!==n.minModel&&!isNaN(parseFloat(n.minModel))&&0<parseFloat(n.minModel)?parseFloat(n.minModel):1)||(t=void 0!==r&&0<r?r:m?void 0!==n.maxModel&&!isNaN(parseFloat(n.maxModel))&&0<parseFloat(n.maxModel)?parseFloat(n.maxModel):10:d&&void 0!==n.minModel&&!isNaN(parseFloat(n.minModel))&&0<parseFloat(n.minModel)?parseFloat(n.minModel):1),n.$applyAsync(function(){o.$setViewValue(t),o.$render(),a.val(c(t))})}),n.$watch("oddsRange",function(e){var t;document.activeElement!==a[0]&&(t=s(o.$viewValue),isNaN(t)||l(t)||(o.$setViewValue(r),o.$render(),a.val(c(r))))}),n.$watch(function(){return o.$modelValue},function(e){e=s(e);!isNaN(e)&&l(e)&&(r=e)})}}}),function(){function e(o){return{restrict:"E",require:"^ngModel",compile:function(e,t){var n=t.inline?document.createElement("div"):document.createElement("input");return n.className=t.class||"",e.replaceWith(n),function(e,n,t,a){function i(){a.$setViewValue(new Date(n.datepicker("getDate")))}o(function(){n.datepicker({onSelect:i,onClose:i,minDate:t.minDate,maxDate:t.maxDate,hideIfNoPrevNext:!0})}),e.$watch(t.ngModel,function(e){var t=e;null!==e&&(t=new Date(e)),o(function(){n.datepicker("setDate",t)})})}}}}e.$inject=["$timeout"],angular.module("tippmixCommonDirectives").directive("datepicker",e)}(),function(){function e(m){return{restrict:"E",require:"^ngModel",compile:function(e,t){var n=t.inline?document.createElement("div"):document.createElement("input");return n.className=t.class||"",e.replaceWith(n),function(a,i,o,r){function s(){return o.linkedDate?a.$eval(o.linkedDate):null}function l(){return"true"===o.isStartDate}function n(){m(function(){var e,t={onSelect:d,onClose:d,hideIfNoPrevNext:!0},n=c();"true"!==o.minDate&&o.minDate&&(e=a.$eval(o.minDate))?(e=new Date(e),t.minDate=n<e?e:n):t.minDate=n,o.maxDate&&(e=a.$eval(o.maxDate))&&(t.maxDate=new Date(e)),i.hasClass("hasDatepicker")?i.datepicker("option",t):i.datepicker(t)})}var c=function(){(e=new Date).setHours(0,0,0,0);var e;if(l())return e;var t=s();return t?((t=new Date(t)).setHours(0,0,0,0),e<t?t:e):e},d=function(){var e,t,n=new Date(i.datepicker("getDate"));r.$setViewValue(n),l()&&o.linkedDate&&((e=s())&&((e=new Date(e)).setHours(0,0,0,0),(t=new Date(n)).setHours(0,0,0,0),e<t&&(a.$eval(o.linkedDate.split(".")[0])[o.linkedDate.split(".")[1]]=new Date(n),a.$apply())))};m(function(){n()}),a.$watch(o.ngModel,function(e){var t=e;null!=e&&(t=new Date(e)),m(function(){i.hasClass("hasDatepicker")&&i.datepicker("setDate",t)})}),o.linkedDate&&a.$watch(o.linkedDate,function(e,t){e!==t&&n()}),o.minDate&&"true"!==o.minDate&&a.$watch(o.minDate,function(e,t){e!==t&&n()}),o.maxDate&&a.$watch(o.maxDate,function(e,t){e!==t&&n()})}}}}e.$inject=["$timeout"],angular.module("tippmixCommonDirectives").directive("datepickerRange",e)}(),function(){function e(a){return{restrict:"E",replace:!0,scope:{show:"="},template:'<div ng-show="spinnerVisible" class="spinner"><div></div><div></div><div></div><div></div></div>',link:function(t){var n;t.spinnerVisible=!1,t.$watch("show",function(e){e?(t.spinnerVisible=!0,n&&a.cancel(n)):n=a(function(){t.spinnerVisible=!1},0)})}}}e.$inject=["$timeout"],angular.module("tippmixCommonDirectives").directive("spinner",e)}(),angular.module("tippmixCommonDirectives").directive("oddsCommaFormat",function(){return{require:"ngModel",priority:100,link:function(a,i,o,r){r.$formatters.push(function(e){if(null==e||""===e)return e;var t=Number(e);if(isNaN(t))return e;e=t.toFixed(2).replace(".",",");return void 0!==o.showPlus&&"false"!==o.showPlus&&10<=t&&(e+=" +"),e}),i.on("blur",function(){var e,t=i.val(),n=Number(String(t).replace("+","").replace(",",".").replace(/[^0-9.]/g,""));isNaN(n)||(e=n.toFixed(2).replace(".",","),void 0!==o.showPlus&&"false"!==o.showPlus&&10<=n&&(e+=" +"),a.$applyAsync(function(){r.$setViewValue(n),r.$render(),i.val(e)}))})}}}),function(){function e(o){return{restrict:"E",replace:!0,scope:{sport:"=",sports:"=marketsFilter",selected:"=",disabled:"=",defaultText:"@"},link:function(t,e,n){t.isOpen=!1;var a,i={label:t.defaultText||"Válassz piactípust!",default:!0};t.getMarkets=function(){var e=t.sport&&t.sports&&(null==(e=t.sports[t.sport.id])?void 0:e.markets)||[];return[i].concat(_toConsumableArray(e))},t.toggle=function(){t.disabled?t.isOpen=!1:t.isOpen=!t.isOpen},t.select=function(e){t.selected=angular.copy(e),t.isOpen=!1},t.selected||(t.sport&&t.sports&&null!=(a=t.sports[t.sport.id])&&null!=(a=a.markets)&&a.length?t.selected=t.sports[t.sport.id].markets[0]:t.selected=i),o.$on("filter.selected.reset",function(){t.select(i)}),o.$on("filter.selected.sport",function(){t.select(i)})},template:'\n\t\t\t<div class="market-selector" ng-class="{disabled: disabled, open: isOpen}" ng-cloak>\n\t\t\t\t<a class="selected" ng-click="toggle()">\n\t\t\t\t\t{{selected.label}}\n\t\t\t\t\t<span ng-if="!isOpen" class="ico ico-nyil-le"></span>\n\t\t\t\t\t<span ng-if="isOpen" class="ico ico-nyil-fel"></span>\n\t\t\t\t</a>\n\t\t\t\t<div class="dropdown" ng-if="isOpen" custom-scrollbar>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li ng-repeat="item in getMarkets() track by $index">\n\t\t\t\t\t\t\t<a ng-click="select(item)" ng-class="{\'active\': item === selected}">\n\t\t\t\t\t\t\t\t{{item.label}}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t'}}e.$inject=["$rootScope"],angular.module("tippmixCommonDirectives").directive("marketSelector",e)}(),function(){function e(r){return{restrict:"A",link:function(e,t,n){var a,i=n.scrollTo,o="select"===t[0].tagName.toLowerCase();o?(a=function(e){r(function(){var e=t[0].options[t[0].selectedIndex].getAttribute("data-scroll-to")||i,e=document.querySelector(e);e&&(e=e.getBoundingClientRect().top+window.pageYOffset-100,$("html, body").animate({scrollTop:e},400))})},t.on("change",a)):(a=function(e){r(function(){var e=document.querySelector(i);e&&(e=e.getBoundingClientRect().top+window.pageYOffset-100,$("html, body").animate({scrollTop:e},400))})},t.on("click",a)),e.$on("$destroy",function(){o?t.off("change",a):t.off("click",a)})}}}e.$inject=["$timeout"],angular.module("tippmixCommonDirectives").directive("scrollTo",e)}(),function(){e.$inject=["$window","$timeout"];var r={},a=10;function s(e,t){var n=r[e];n&&n.length&&(t=t||0,requestAnimationFrame(function(){null===function(e){e.forEach(function(e){e.css("height","auto")});var t=e.map(function(e){return e[0].offsetHeight||0});if(t.some(function(e){return 0===e}))return null;var n=Math.max.apply(Math,t);return e.forEach(function(e){e.css("height",n+"px")}),n}(n)&&t<a&&setTimeout(function(){s(e,t+1)},16)}))}function e(a,o){return{restrict:"A",link:function(e,n,t){var i=t.equalizer;n.closest(".equalizer").length&&(r[i]||(r[i]=[]),r[i].push(n),o(function(){var a,e;s(i),(e=r[a=i])&&e.length&&e.forEach(function(e){var t=e[0],n=new MutationObserver(function(){s(a)});n.observe(t,{childList:!0,subtree:!0,characterData:!0}),e.data("equalizerObserver",n)})},0,!1),angular.element(a).on("resize.equalizer-"+i,function(){s(i)}),e.$on("$destroy",function(){var e=r[i],t=e.indexOf(n),e=(-1<t&&e.splice(t,1),n.data("equalizerObserver"));e&&e.disconnect(),angular.element(a).off("resize.equalizer-"+i)}))}}}angular.module("tippmixCommonDirectives").directive("equalizer",e)}(),angular.module("tippmixCommonFilters").filter("truncate",function(){return function(e,t,n){return angular.isUndefined(e)?"":(n&&e.split(" ")[0].length>n&&(t=n),e.length<=t?e:e.substr(0,t-3).trim()+"...")}}),angular.module("tippmixCommonFilters").filter("textCleaning",function(){return function(e){if(angular.isUndefined(e))return"";var t=e.indexOf("[");return e=-1!==t?e.substr(0,t)+e.substr(e.indexOf("]")+1,e.length):e}}),angular.module("tippmixCommonFilters").filter("maxOdds",function(){return function(e){return e=10<=parseFloat(e)?"10+":e}}),angular.module("tippmixCommonFilters").filter("hdv",function(){return function(e,t,n,a){var i="",o=[];if(3<n||a)return e;for(var r=0,s=(o=angular.isString(t)&&-1!==t.indexOf(",")?t.split(","):[t]).length;r<s;r++){if(2===n)switch(parseInt(o[r])){case 1:i+="H";break;case 2:i+="V"}else if(3===n)switch(parseInt(o[r])){case 1:i+="H";break;case 2:i+="D";break;case 3:i+="V"}r+1!==s&&1<s&&(i+=", ")}return i}}),function(){function e(e,t){return function(e,t){t=parseInt(t);for(var n=1;n<=t;n++)e.push(n);return e}}e.$inject=["$filter","$locale"],angular.module("tippmixCommonFilters").filter("range",e)}(),angular.module("tippmixCommonFilters").filter("huDate",function(){return function(e){return moment(e).tz("Europe/Budapest").format("YYYY-MM-DDTHH:mm:ss.SSSZ")}}),angular.module("tippmixCommonFilters").filter("capitalize",function(){return function(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}}),function(){function e(h,b,y,o){function e(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}function n(e,t){for(var n in e)for(var a=0,i=t.length;a<i;a++)delete e[n][t[a]]}function l(e,t){var n=[],a=0;if(null===e)return n;if(a=e.length,t)for(;a--;)n.push(e[a].id);else for(;a--;)n.push(e[a].participantId);return n}var S={},a=["title","details","unitCount","calculator","expectedPrize","totalStake","sortId"];return h.$watch(function(){return S.data},function(e,t){e!==t&&(e=angular.copy(S.data),n(e.prematch.multiple,a),n(e.live.multiple,a),n(e.vSport.multiple,a),sessionStorage.setItem(b.sessionName,angular.toJson(e)))},!0),S.data={prematch:{items:{},multiple:{},availableCustomBets:[]},live:{items:{},multiple:{},availableCustomBets:[]},vSport:{items:{},multiple:{}}},S.market="",S.availableCustomBets=[],S._getItem=function(e,t,n,a,i,o){return o?{id:e,eventId:t.id,eventName:t.name,eventVersion:t.version,eventDate:t.date,marketId:n.id,marketName:n.name,marketVersion:n.version,outcomeNo:a.no,outcomeName:a.name,outcomeLength:n.outcomes.length,fixedOdds:a.fixedOdds,multipleSelection:!0,bankerSelection:!1,competitionId:t.competition.id,eventClosedCombinations:t.closedCombinations,marketClosedCombinations:n.closedCombinations,competitionClosedCombinations:t.competition.closedCombinations,marketTypeCCGroups:n.typeCcGroups,eventParticipants:l(t.participants,!0),combinationBanKeys:[],combinationBanMessages:[],combinationCountBanMessages:[],combinationBanFromBetslipCheck:!1,statusCode:0,isLive:t.isLive,isOutright:t.isOutright,minCombiCount:n.minCombiCount,maxCombiCount:n.maxCombiCount,marketRealNo:n.realNo,outcomeRealNo:a.realNo,addToBetslip:Date.now(),isVSport:!!i,marketRoundId:n.roundId,isCustomBetable:a.isCustomBet,customBetItems:[]}:{id:e,eventId:t.eventId,eventName:t.eventName,eventVersion:t.eventVersion,eventDate:t.eventDate,marketId:n.marketId,marketName:n.marketName,marketVersion:n.marketVersion,outcomeNo:a.outcomeNo,outcomeName:a.outcomeName,outcomeLength:n.outcomes.length,fixedOdds:a.fixedOdds,multipleSelection:!0,bankerSelection:!1,competitionId:t.competitionId,eventClosedCombinations:t.eventClosedCombinations,marketClosedCombinations:n.marketClosedCombinations,competitionClosedCombinations:t.competitionClosedCombinations,marketTypeCCGroups:n.marketTypeCCGroups,eventParticipants:l(t.eventParticipants),combinationBanKeys:[],combinationBanMessages:[],combinationCountBanMessages:[],combinationBanFromBetslipCheck:!1,statusCode:0,isLive:t.isLive,isOutright:t.isOutright,minCombiCount:n.minCombiCountLrt,maxCombiCount:n.maxCombiCount,marketRealNo:n.marketRealNo,outcomeRealNo:a.outcomeRealNo,addToBetslip:Date.now(),isVSport:!!i,marketRoundId:n.roundId,isCustomBetable:a.isCustomBet,customBetItems:[]}},S._convertAndUpdateToCustomBet=function(e,t,n,a){a?delete this.data.live.items[e.id]:delete this.data.prematch.items[e.id],n={id:e.eventId,eventId:e.eventId,eventName:e.eventName,eventVersion:e.eventVersion,eventDate:e.eventDate,marketId:null,marketName:null,marketVersion:null,outcomeNo:null,outcomeRealNo:null,outcomeName:null,outcomeLength:null,fixedOdds:n,multipleSelection:!0,bankerSelection:e.bankerSelection,eventClosedCombinations:e.eventClosedCombinations,competitionClosedCombinations:e.competitionClosedCombinations,eventParticipants:e.eventParticipants,combinationBanKeys:[],combinationBanMessages:[],combinationCountBanMessages:[],combinationBanFromBetslipCheck:!1,statusCode:0,isLive:e.isLive,isOutright:e.isOutright,marketRoundId:null,marketRealNo:e.marketRealNo,addToBetslip:e.addToBetslip,isVSport:!1,isCustomBetable:!0},_defineProperty(n,"combinationBanKeys",[]),_defineProperty(n,"customBetItems",t),_defineProperty(n,"marketClosedCombinations",t.reduce(function(e,t){return[].concat(_toConsumableArray(e),_toConsumableArray(t.marketClosedCombinations))},[])),_defineProperty(n,"marketTypeCCGroups",t.reduce(function(e,t){return[].concat(_toConsumableArray(e),_toConsumableArray(t.marketTypeCCGroups))},[])),_defineProperty(n,"minCombiCount",t.reduce(function(e,t){return Math.max(e,t.minCombiCount)},e.minCombiCount)),_defineProperty(n,"maxCombiCount",t.reduce(function(e,t){return Math.min(e,t.maxCombiCount)},e.maxCombiCount));t=n;a?S.data.live.items[e.eventId]=t:S.data.prematch.items[e.eventId]=t},S._updateAvailableCustomBet=function(e,t){this._removeAvailableCustomBet(e.id,t),(t?this.data.live:this.data.prematch).availableCustomBets.push(e)},S._removeAvailableCustomBet=function(t,e){var n;e?-1!==(n=this.data.live.availableCustomBets.findIndex(function(e){return e.id===t}))&&this.data.live.availableCustomBets.splice(n,1):-1!==(n=this.data.prematch.availableCustomBets.findIndex(function(e){return e.id===t}))&&this.data.prematch.availableCustomBets.splice(n,1)},S._convertToNonCustomBet=function(e,t,n){n?delete this.data.live.items[e.id]:delete this.data.prematch.items[e.id];e={id:t.id,eventId:t.eventId,eventName:t.eventName,eventVersion:t.eventVersion,eventDate:t.eventDate,marketId:t.marketId,marketName:t.marketName,marketVersion:t.marketVersion,outcomeNo:t.outcomeNo,outcomeName:t.outcomeName,outcomeLength:t.outcomeLength,fixedOdds:t.fixedOdds,multipleSelection:!0,bankerSelection:t.bankerSelection,competitionId:t.competitionId,eventClosedCombinations:t.eventClosedCombinations,marketClosedCombinations:t.marketClosedCombinations,competitionClosedCombinations:t.competitionClosedCombinations,marketTypeCCGroups:t.marketTypeCCGroups,eventParticipants:t.eventParticipants,combinationBanKeys:[],combinationBanMessages:[],combinationCountBanMessages:[],combinationBanFromBetslipCheck:!1,statusCode:0,isLive:t.isLive,isOutright:t.isOutright,minCombiCount:t.minCombiCountLrt,maxCombiCount:t.maxCombiCount,marketRealNo:t.marketRealNo,outcomeRealNo:t.outcomeRealNo,addToBetslip:t.addToBetslip,isVSport:t.vSport,marketRoundId:t.roundId,isCustomBetable:t.isCustomBetable,customBetItems:[]};n?S.data.live.items[t.id]=e:S.data.prematch.items[t.id]=e},S.disabledOddsByCustombet=function(t,n,a,e){return!!(e=e?this.data.live.availableCustomBets.find(function(e){return e.id===t}):this.data.prematch.availableCustomBets.find(function(e){return e.id===t}))&&(!(e=e.availableMarkets.find(function(e){return e.id===n}))||!e.availableOutcomes.find(function(e){return e.no===a}))},S.init=function(){var e=sessionStorage.getItem(b.sessionName);null!==e&&(this.data=angular.fromJson(e),h.$broadcast("betslip.storageReady"))},S.addItem=function(t,e,n,a,i){var o=this,r=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],s=6<arguments.length?arguments[6]:void 0,l=o._getItem(t,e,n,a,i,7<arguments.length?arguments[7]:void 0),c=e.isLive,d=e.eventId||e.id;if(i)o.getVSportItemsLength()+1<=b.vSportMaxCount?(o.data.vSport.items[t]=l,o.removeVSportMultiple(),h.$broadcast("betslip.addVSportItem"),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.showToast")):h.$broadcast("betslip.vSportMaxCountError",b.vSportMaxCount);else if(c){var m=b.liveMaxCount,u=null;if(a.isCustomBet){for(var p in o.data.live.items)o.data.live.items[p].eventId===d&&o.data.live.items[p].isCustomBetable&&(u=o.data.live.items[p]);u&&m++}if(o.getLiveItemsLength()+1<=m)if(a.isCustomBet)if(u){if(0===u.customBetItems.length&&4<o.getLiveCustomBetItemsLength()+1)return h.$broadcast("betslip.customBetMaxBetslipCountError"),!1;if(10===u.customBetItems.length)return h.$broadcast("betslip.customBetMaxCountError"),!1;var v=null;if(0<u.customBetItems.length){if(0<(v=[].concat(_toConsumableArray(u.customBetItems),[l])).length)for(var f=0;f<v.length;f++)v[f].bankerSelection=u.bankerSelection;e={id:u.eventId,selections:v.map(function(e){return{marketId:e.marketId,outcomeNo:e.outcomeNo}})};r?y({method:"POST",url:"/custombet-api/v1/custombet/calculate",data:JSON.stringify({event:e}),headers:{"Content-Type":"application/json"}}).success(function(e){S._updateAvailableCustomBet(e.event,c),S._convertAndUpdateToCustomBet(u,v,e.event.odds,c),S.removeLiveMultiple(),h.$broadcast("betslip.addLiveItem"),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.showToast")}).error(function(){return h.$broadcast("betslip.calculateCallError"),!1}):o._convertAndUpdateToCustomBet(u,v,0,c)}else{if(0<(v=[_objectSpread(_objectSpread({},u),{},{combinationBanKeys:[]}),l]).length)for(f=0;f<v.length;f++)v[f].bankerSelection=u.bankerSelection;e={id:u.eventId,selections:v.map(function(e){return{marketId:e.marketId,outcomeNo:e.outcomeNo}})};r?y({method:"POST",url:"/custombet-api/v1/custombet/calculate",data:JSON.stringify({event:e}),headers:{"Content-Type":"application/json"}}).success(function(e){S._updateAvailableCustomBet(e.event,c),S._convertAndUpdateToCustomBet(u,v,e.event.odds,c),S.removeLiveMultiple(),h.$broadcast("betslip.addLiveItem"),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.showToast")}).error(function(){var e={id:u.eventId,selections:[{marketId:v[0].marketId,outcomeNo:v[0].outcomeNo}]};y({method:"POST",url:"/custombet-api/v1/custombet/calculate",data:JSON.stringify({event:e}),headers:{"Content-Type":"application/json"}}).success(function(e){S._updateAvailableCustomBet(e.event,c),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.calculateCallErrorNoAddItem")}).error(function(){return h.$broadcast("betslip.calculateCallError"),!1})}):o._convertAndUpdateToCustomBet(u,v,0,c)}}else if("custombet"===S.market){var g=[];for(p in o.data.live.items)0<o.data.live.items[p].customBetItems.length&&g.push(o.data.live.items[p]);if(10===g.length)return h.$broadcast("betslip.customBetMaxCountError"),!1;e={id:l.eventId,selections:[{marketId:l.marketId,outcomeNo:l.outcomeNo}]};r&&y({method:"POST",url:"/custombet-api/v1/custombet/calculate",data:JSON.stringify({event:e}),headers:{"Content-Type":"application/json"}}).success(function(e){S._updateAvailableCustomBet(e.event,c),S.data.live.items[t]=l,S.removeLiveMultiple(),h.$broadcast("betslip.addLiveItem"),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.showToast")}).error(function(){return h.$broadcast("betslip.calculateCallError"),!1})}else o.data.live.items[t]=l,o.removeLiveMultiple(),h.$broadcast("betslip.addLiveItem"),h.$broadcast("betslip.addItem"),s||h.$broadcast("betslip.showToast");else o.data.live.items[t]=l,o.removeLiveMultiple(),h.$broadcast("betslip.addLiveItem"),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.showToast");else h.$broadcast("betslip.liveMaxCountError",b.liveMaxCount)}else{m=b.prematchMaxCount,u=null;if(a.isCustomBet){for(var p in o.data.prematch.items)o.data.prematch.items[p].eventId===d&&o.data.prematch.items[p].isCustomBetable&&(u=o.data.prematch.items[p]);u&&m++}if(o.getPrematchItemsLength()+1<=m)if(a.isCustomBet)if(u){if(0===u.customBetItems.length&&4<o.getPrematchCustomBetItemsLength()+1)return h.$broadcast("betslip.customBetMaxBetslipCountError"),!1;if(10===u.customBetItems.length)return h.$broadcast("betslip.customBetMaxCountError"),!1;v=null;if(0<u.customBetItems.length){if(0<(v=[].concat(_toConsumableArray(u.customBetItems),[l])).length)for(f=0;f<v.length;f++)v[f].bankerSelection=u.bankerSelection;e={id:u.eventId,selections:v.map(function(e){return{marketId:e.marketId,outcomeNo:e.outcomeNo}})};r?y({method:"POST",url:"/custombet-api/v1/custombet/calculate",data:JSON.stringify({event:e}),headers:{"Content-Type":"application/json"}}).success(function(e){S._updateAvailableCustomBet(e.event),S._convertAndUpdateToCustomBet(u,v,e.event.odds,c),S.removePrematchMultiple(),h.$broadcast("betslip.addPrematchItem"),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.showToast")}).error(function(){return h.$broadcast("betslip.calculateCallError"),!1}):o._convertAndUpdateToCustomBet(u,v,0,c)}else{if(0<(v=[_objectSpread(_objectSpread({},u),{},{combinationBanKeys:[]}),l]).length)for(f=0;f<v.length;f++)v[f].bankerSelection=u.bankerSelection;e={id:u.eventId,selections:v.map(function(e){return{marketId:e.marketId,outcomeNo:e.outcomeNo}})};r?y({method:"POST",url:"/custombet-api/v1/custombet/calculate",data:JSON.stringify({event:e}),headers:{"Content-Type":"application/json"}}).success(function(e){S._updateAvailableCustomBet(e.event),S._convertAndUpdateToCustomBet(u,v,e.event.odds,c),S.removePrematchMultiple(),h.$broadcast("betslip.addPrematchItem"),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.showToast")}).error(function(){var e={id:u.eventId,selections:[{marketId:v[0].marketId,outcomeNo:v[0].outcomeNo}]};y({method:"POST",url:"/custombet-api/v1/custombet/calculate",data:JSON.stringify({event:e}),headers:{"Content-Type":"application/json"}}).success(function(e){S._updateAvailableCustomBet(e.event),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.calculateCallErrorNoAddItem")}).error(function(){return h.$broadcast("betslip.calculateCallError"),!1})}):o._convertAndUpdateToCustomBet(u,v,0,c)}}else if("custombet"===S.market){g=[];for(p in o.data.prematch.items)0<o.data.prematch.items[p].customBetItems.length&&g.push(o.data.prematch.items[p]);if(10===g.length)return h.$broadcast("betslip.customBetMaxCountError"),!1;e={id:l.eventId,selections:[{marketId:l.marketId,outcomeNo:l.outcomeNo}]};r&&y({method:"POST",url:"/custombet-api/v1/custombet/calculate",data:JSON.stringify({event:e}),headers:{"Content-Type":"application/json"}}).success(function(e){S._updateAvailableCustomBet(e.event),S.data.prematch.items[t]=l,S.removePrematchMultiple(),h.$broadcast("betslip.addPrematchItem"),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.showToast")}).error(function(){return h.$broadcast("betslip.calculateCallError"),!1})}else o.data.prematch.items[t]=l,o.removePrematchMultiple(),h.$broadcast("betslip.addPrematchItem"),h.$broadcast("betslip.addItem"),s||h.$broadcast("betslip.showToast");else o.data.prematch.items[t]=l,o.removePrematchMultiple(),h.$broadcast("betslip.addPrematchItem"),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.showToast");else h.$broadcast("betslip.prematchMaxCountError",b.prematchMaxCount)}},S.addQuickItem=function(e,t){t.isVSport?this.getVSportItemsLength()+1<=b.vSportMaxCount?(this.data.vSport.items[e]=t,this.removeVSportMultiple(),h.$broadcast("betslip.addVSportItem"),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.showToast")):h.$broadcast("betslip.vSportMaxCountError",b.vSportMaxCount):t.isLive?this.getLiveItemsLength()+1<=b.liveMaxCount?(this.data.live.items[e]=t,this.removeLiveMultiple(),h.$broadcast("betslip.addLiveItem"),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.showToast")):h.$broadcast("betslip.liveMaxCountError",b.liveMaxCount):this.getPrematchItemsLength()+1<=b.prematchMaxCount?(this.data.prematch.items[e]=t,this.removePrematchMultiple(),h.$broadcast("betslip.addPrematchItem"),h.$broadcast("betslip.addItem"),h.$broadcast("betslip.showToast")):h.$broadcast("betslip.prematchMaxCountError",b.prematchMaxCount)},S.toggleItem=function(e,t,n,a){var i=e.eventId+"-"+t.marketId+"-"+n.outcomeNo;if((a?this.data.vSport:e.isLive?this.data.live:this.data.prematch).wagerId)h.$broadcast("betslip.confirmWager",{event:e,markets:t,outcome:n,vSport:a});else if(this.data.prematch.items[i]||this.data.live.items[i]||this.data.vSport.items[i])this.removeItem(i,e.eventId);else{if(!a){if(e.isLive){var o,r=null;for(s in this.data.live.items)s==e.eventId&&(r=this.data.live.items[s]);return!r||-1===(o=r.customBetItems.findIndex(function(e){return e.id===i}))?this.addItem(i,e,t,n,a):this.removeCustomBetItemByIndex(r,o)}for(var s in this.data.prematch.items)s==e.eventId&&(r=this.data.prematch.items[s]);return!r||-1===(o=r.customBetItems.findIndex(function(e){return e.id===i}))?this.addItem(i,e,t,n,a):this.removeCustomBetItemByIndex(r,o)}this.addItem(i,e,t,n,a)}},S.addQuickBet=function(e,t){if(this.getPrematchItemsLength()+e.length<=b.prematchMaxCount){for(var n=0,a=e.length;n<a;n++){var i=e[n].eventId+"-"+e[n].marketId+"-"+e[n].outcomeNo;if(!this.itemIsExists(i)){var o=0;if(e[n].oddsList)for(var r=e[n].oddsList.length;r--;)e[n].oddsList[r].outcomeNo===e[n].outcomeNo&&(o=e[n].oddsList[r].outcomeRealNo);else e[n].oddsList=[];this.addQuickItem(i,{eventId:e[n].eventId,eventName:e[n].eventName,eventDate:e[n].eventDate,eventVersion:e[n].eventVersion,marketId:e[n].marketId,marketName:e[n].marketName,marketVersion:e[n].marketVersion,marketType:e[n].marketType,outcomeNo:e[n].outcomeNo,outcomeName:e[n].outcomeName,outcomeLength:e[n].oddsList.length,fixedOdds:e[n].fixedOdds,multipleSelection:!0,bankerSelection:!1,competitionId:e[n].competitionId,eventClosedCombinations:e[n].eventClosedCombinations,marketClosedCombinations:e[n].marketClosedCombinations,competitionClosedCombinations:e[n].competitionClosedCombinations,marketTypeCCGroups:e[n].marketTypeCCGroups,eventParticipants:l(e[n].eventParticipants),combinationBanKeys:[],combinationBanMessages:[],combinationCountBanMessages:[],combinationBanFromBetslipCheck:!1,statusCode:0,isLive:e[n].isLive,isOutright:e[n].isOutright,minCombiCount:e[n].minCombiCountLrt,maxCombiCount:e[n].maxCombiCount,marketRealNo:e[n].marketRealNo,outcomeRealNo:o,addToBetslip:Date.now(),customBetItems:[]})}}var s=this.getPrematchItemsLength(),s=s+"/"+s;this.data.prematch.multiple[s]?this.data.prematch.multiple[s].selected=!0:this.data.prematch.multiple[s]={selected:!0},this.data.prematch.globalStake=t}else h.$broadcast("betslip.prematchMaxCountError",b.prematchMaxCount)},S.itemIsExists=function(t){var e,n=!1,a=!1;for(e in this.data.prematch.items)this.data.prematch.items[e].customBetItems.some(function(e){return e.id===t})&&(n=!0);for(e in this.data.live.items)e!==t&&!this.data.live.items[e].customBetItems.some(function(e){return e.id===t})||(a=!0);return!!this.data.prematch.items[t]||!!this.data.live.items[t]||!!this.data.vSport.items[t]||n||a},S.itemIsExistsForCustombetOffers=function(t){var e,n=!1,a=!1;for(e in this.data.prematch.items)!this.data.prematch.items[e].customBetItems.some(function(e){return e.id===t})&&this.data.prematch.items[e].eventId!==t||(n=!0);for(e in this.data.live.items)e!==t&&!this.data.live.items[e].customBetItems.some(function(e){return e.id===t})&&this.data.live.items[e].eventId!==t||(a=!0);return!!this.data.prematch.items[t]||!!this.data.live.items[t]||!!this.data.vSport.items[t]||n||a},S.setStorageMarket=function(e){S.market=e},S.fetchCalculateIfNotExistsAvailableCustombetByEventId=function(t){if("custombet"===S.market){var e=this.data.live.availableCustomBets.find(function(e){return e.id===t}),n=this.data.prematch.availableCustomBets.find(function(e){return e.id===t});if(!e){var a=null;for(i in this.data.live.items)this.data.live.items[i].eventId===t&&this.data.live.items[i].isCustomBetable&&0===this.data.live.items[i].customBetItems.length&&(a=this.data.live.items[i]);a&&(o={id:t,selections:[{marketId:a.marketId,outcomeNo:a.outcomeNo}]},y({method:"POST",url:"/custombet-api/v1/custombet/calculate",data:JSON.stringify({event:o}),headers:{"Content-Type":"application/json"}}).success(function(e){S._updateAvailableCustomBet(e.event,!0)}).error(function(){return h.$broadcast("betslip.calculateCallError"),!1}))}if(!n){var i,o,r=null;for(i in this.data.prematch.items)this.data.prematch.items[i].eventId===t&&this.data.prematch.items[i].isCustomBetable&&0===this.data.prematch.items[i].customBetItems.length&&(r=this.data.prematch.items[i]);r&&(o={id:t,selections:[{marketId:r.marketId,outcomeNo:r.outcomeNo}]},y({method:"POST",url:"/custombet-api/v1/custombet/calculate",data:JSON.stringify({event:o}),headers:{"Content-Type":"application/json"}}).success(function(e){S._updateAvailableCustomBet(e.event),h.$broadcast("betslip.addItem")}).error(function(){return h.$broadcast("betslip.calculateCallError"),!1}))}}},S.removeCustomBetItemByIndex=function(t,e){var n=_toConsumableArray(t.customBetItems),e=(n.splice(e,1),{id:t.eventId,selections:n.map(function(e){return{marketId:e.marketId,outcomeNo:e.outcomeNo}})});y({method:"POST",url:"/custombet-api/v1/custombet/calculate",data:JSON.stringify({event:e}),headers:{"Content-Type":"application/json"}}).success(function(e){t.customBetItems=n,S._updateAvailableCustomBet(e.event),1===t.customBetItems.length?S._convertToNonCustomBet(t,t.customBetItems[0],t.isLive):S._convertAndUpdateToCustomBet(t,_toConsumableArray(t.customBetItems),e.event.odds,t.isLive),h.$broadcast("betslip.removeItem")}).error(function(){return h.$broadcast("betslip.calculateCallError"),!1})},S.removeCustomBetItemById=function(e,t,n){var a;n=n?(a=this.data.live.items[e]).customBetItems.findIndex(function(e){return e.id===t}):(a=this.data.prematch.items[e]).customBetItems.findIndex(function(e){return e.id===t}),this.removeCustomBetItemByIndex(a,n)},S.removeItem=function(e,t){this.data.vSport.items[e]?(delete this.data.vSport.items[e],this.removeVSportMultiple(),h.$broadcast("betslip.removeVSportItem")):this.data.prematch.items[e]?(this.data.prematch.items[e].isCustomBetable&&S._removeAvailableCustomBet(t,!1),delete this.data.prematch.items[e],this.removePrematchMultiple(),h.$broadcast("betslip.removePrematchItem")):this.data.live.items[e]&&(this.data.live.items[e].isCustomBetable&&S._removeAvailableCustomBet(t,!0),delete this.data.live.items[e],this.removeLiveMultiple(),h.$broadcast("betslip.removeLiveItem")),h.$broadcast("betslip.removeItem")},S.removeCustombetableItemByEventId=function(e,t){this.data.prematch.items[t]?(this.data.prematch.items[t].isCustomBetable&&S._removeAvailableCustomBet(t,!1),delete this.data.prematch.items[t],this.removePrematchMultiple(),h.$broadcast("betslip.removePrematchItem")):this.data.prematch.items[e]&&this.data.prematch.items[e].isCustomBetable?(delete this.data.prematch.items[e],this.removePrematchMultiple(),h.$broadcast("betslip.removePrematchItem")):this.data.live.items[t]?(this.data.live.items[t].isCustomBetable&&S._removeAvailableCustomBet(t,!0),delete this.data.live.items[t],this.removeLiveMultiple(),h.$broadcast("betslip.removeLiveItem")):this.data.live.items[e]&&this.data.live[e].isCustomBetable&&(delete this.data.live.items[e],this.removeLiveMultiple(),h.$broadcast("betslip.removeLiveItem")),h.$broadcast("betslip.removeItem")},S.removeAllPrematch=function(){S.data.prematch.items={},S.data.prematch.multiple={},S.data.prematch.availableCustomBets=[],S.data.prematch.wagerId=null,S.data.prematch.wagerIdCounter=null,h.$broadcast("betslip.removePrematchItem"),h.$broadcast("betslip.removeItem")},S.removeAllLive=function(){S.data.live.items={},S.data.live.multiple={},S.data.live.availableCustomBets=[],S.data.live.wagerId=null,S.data.live.wagerIdCounter=null,h.$broadcast("betslip.removeLiveItem"),h.$broadcast("betslip.removeItem")},S.removeAllVSport=function(){S.data.vSport.items={},S.data.vSport.multiple={},S.data.vSport.wagerId=null,S.data.vSport.wagerIdCounter=null,h.$broadcast("betslip.removeVSportItem"),h.$broadcast("betslip.removeItem")},S.removeStorage=function(){S.data={prematch:{items:{},multiple:{},availableCustomBets:[]},live:{items:{},multiple:{},availableCustomBets:[]},vSport:{items:{},multiple:{}}},h.$broadcast("betslip.removeItem")},S.removeLiveMultiple=function(){this.data.live.multiple={}},S.removePrematchMultiple=function(){this.data.prematch.multiple={}},S.removeVSportMultiple=function(){this.data.vSport.multiple={}},S.getPrematchItemsLength=function(){return e(this.data.prematch.items)},S.getLiveItemsLength=function(){return e(this.data.live.items)},S.getVSportItemsLength=function(){return e(this.data.vSport.items)},S.getItemsLength=function(){return this.getPrematchItemsLength()+this.getLiveItemsLength()+this.getVSportItemsLength()},S.getLiveCustomBetItemsLength=function(){var e,t=0;for(e in this.data.live.items)0<this.data.live.items[e].customBetItems.length&&t++;return t},S.getPrematchCustomBetItemsLength=function(){var e,t=0;for(e in this.data.prematch.items)0<this.data.prematch.items[e].customBetItems.length&&t++;return t},S.getSession=function(){return angular.fromJson(sessionStorage.getItem(b.sessionName))},S.triggerPulseAnimation=function(){o(function(){var e=angular.element("#header .link-betslip .num");e.length&&(e.addClass("pulse-animation"),o(function(){e.removeClass("pulse-animation")},600))},50)},S.showToastMessage=function(i){o(function(){var e,t=angular.element(".betslip-toast"),t=(t.length&&t.remove(),i&&i.toast?i.toast:"Fogadás hozzáadva"),n=angular.element('<div class="betslip-toast"><span class="ico ico-check"></span>'+t+' <span class="ico ico-bezaras betslip-toast-close"></span></div>'),a=(angular.element("body").append(n),!1);n.find(".betslip-toast-close").on("click",function(){e&&o.cancel(e),n.removeClass("show"),o(function(){n.remove()},300)}),n.on("mouseenter",function(){a=!0,e&&o.cancel(e)}),n.on("mouseleave",function(){a=!1,e=o(function(){a||(n.removeClass("show"),o(function(){n.remove()},300))},3e3)}),o(function(){n.addClass("show")},10),e=o(function(){a||(n.removeClass("show"),o(function(){n.remove()},300))},3e3)},100)},h.$on("betslip.showToast",function(){S.triggerPulseAnimation(),S.showToastMessage()}),S}e.$inject=["$rootScope","betslipSettings","$http","$timeout"],angular.module("tippmixCommonServices").factory("betslipStorage",e)}(),function(){function e(s,a,m){function l(e){var t=s.defer(),n=new Image;return n.src=a+e,n.onload=function(){t.resolve(n)},t.promise}function d(e,t,n,a,i){a=a||0;for(var o=0,r=e.length;o<r;o++){var s=t+a+o*i,l=(y&&2<o&&(s+=8),n),c=parseInt(e[o]);isNaN(c)||T(s,l+=c*i)}}function c(e,t){h.drawImage(v,0,0);var n=e.items;1===t?(n=i(e.items,0,10),T(I.moreBetslip.dx,I.moreBetslip.dy)):2===t&&(n=i(e.items,10)),o(n),D(e.multiple,I.combinations.dx,I.combinations.dy,I.unit),r(e.multiple,I.specialCombinations.dx,I.specialCombinations.dy,I.unit),N(e.globalStake,I.stakeUnits.dx,I.stakeUnits.dy,I.unit)}function u(e){h.drawImage(v,0,0),o(e.items),D(e.multiple,C.combinations.dx,C.combinations.dy,C.unit),N(e.globalStake,C.stakeUnits.dx,C.stakeUnits.dy,C.unit)}function p(e){h.drawImage(v,0,0),o(e.items),D(e.multiple,$.combinations.dx,$.combinations.dy,$.unit),r(e.multiple,$.specialCombinations.dx,$.specialCombinations.dy,$.unit),N(e.globalStake,$.stakeUnits.dx,$.stakeUnits.dy,$.unit)}var v,f,g,h,b,y,S,k,I={unit:27,frames:[{dx:29,dy:148},{dx:227,dy:148},{dx:425,dy:148},{dx:29,dy:450},{dx:227,dy:450},{dx:425,dy:450},{dx:29,dy:752},{dx:227,dy:752},{dx:425,dy:752},{dx:425,dy:1054}],bankerInFrame:{dx:141,dy:272},hInFrame:{dx:0,dy:272},dInFrame:{dx:27,dy:272},vInFrame:{dx:54,dy:272},specialCombinations:{dx:168,dy:1081},combinations:{dx:227,dy:1081},stakeUnits:{dx:254,dy:1245},moreBetslip:{dx:336,dy:1190}},C={unit:34.5,frames:[{dx:33,dy:179},{dx:333,dy:179},{dx:33,dy:574},{dx:333,dy:574}],hInFrame:{dx:0,dy:346},dInFrame:{dx:34.5,dy:346},vInFrame:{dx:69,dy:346},combinations:{dx:479,dy:990},stakeUnits:{dx:479,dy:1094}},$={unit:26,frames:[{dx:153,dy:156},{dx:362,dy:156},{dx:153,dy:443},{dx:362,dy:443},{dx:153,dy:732},{dx:362,dy:732},{dx:153,dy:1020},{dx:362,dy:1020}],bankerInFrame:{dx:155,dy:257},hInFrame:{dx:0,dy:257},dInFrame:{dx:26,dy:257},vInFrame:{dx:52,dy:257},specialCombinations:{dx:122,dy:444},combinations:{dx:44,dy:939},stakeUnits:{dx:44,dy:759}},x=[5e4,3e4,2e4,1e4,5e3,3e3,2e3,1e3,500,300,200,100,50,30,20,10],w=[5e4,3e4,2e4,1e4,5e3,3e3,2e3,1e3,500,300,200,100],O=[5e4,3e4,2e4,1e4,5e3,3e3,2e3,1e3,500,300,200,100,50,30,20,10],i=function(e,t,n){var a=Object.keys(e);if(a.length<1)return[];n=n||a.length;var i,o={},r=0;for(i in e){if(n<=r)break;t<=r&&(o[i]=e[i]),r++}return o},T=function(e,t){b?h.drawImage(f,e,t,19,19):y?h.drawImage(f,e,t,25,25):S&&h.drawImage(f,e,t,17,17)},o=function(e){var t,n,a=0;for(n in b?t=I:y?t=C:S&&(t=$),e){var i,o=e[n],r=t.frames[a].dx,s=t.frames[a].dy,l=(d(o.marketRealNo,r,s,0,t.unit),1===o.marketType||2===o.marketType||4===o.marketType),c=2===o.outcomeLength||3===o.outcomeLength;if(l&&c){if(2===o.outcomeLength)switch(o.outcomeNo){case 1:T(r+t.hInFrame.dx,s+t.hInFrame.dy);break;case 2:T(r+t.vInFrame.dx,s+t.vInFrame.dy)}else if(3===o.outcomeLength)switch(o.outcomeNo){case 1:T(r+t.hInFrame.dx,s+t.hInFrame.dy);break;case 2:T(r+t.dInFrame.dx,s+t.dInFrame.dy);break;case 3:T(r+t.vInFrame.dx,s+t.vInFrame.dy)}}else o.outcomeRealNo&&(b?i=140:y?i=215:S&&(i=155),d(e[n].outcomeRealNo,r,s,i,t.unit));(b||S)&&o.bankerSelection&&T(r+t.bankerInFrame.dx,s+t.bankerInFrame.dy),k===n&&(b?h.rect(r-5,s-5,196,300):y?h.rect(r-9,s-9,290,385):S&&h.rect(r-5,s-5,207,284),h.lineWidth=6,h.strokeStyle="#82c341",h.stroke()),a++}},r=function(e,t,n,a){for(var i in e)21<=i&&i<=30&&e[i].selected&&(i=parseInt(i),isNaN(i)||T(t,n+(i-21)*a))},D=function(e,t,n,a){for(var i in e){var o=parseInt(i);(o<=20&&e[i].selected||e[i].selected&&"single"===i)&&(i=o="single"===i?1:o,b&&5<o?0===(i-=5*parseInt(i/5))&&(i=5):S&&4<o&&0===(i-=4*parseInt(i/4))&&(i=4),o=o,b?1<=o&&o<=5?o=0:6<=o&&o<=10?o=1:11<=o&&o<=15?o=2:16<=o&&o<=20&&(o=3):S&&(1<=o&&o<=4?o=0:5<=o&&o<=9&&(o=1)),T(t+(i-1)*a,n+o*a))}},N=function(e,t,n,a){var i,o,r=[],s=[];if(b?(r=x,i=m.minPrematchStake,o=m.maxPrematchStake):y?(r=w,i=m.minLiveStake,o=m.maxLiveStake):S&&(r=O,i=m.minVSportStake,o=m.maxVSportStake),!angular.isUndefined(e)&&"0"===(e=e.toString())[e.length-1]&&!(y&&"0"!==e[e.length-2]||o<e||e<i))for(var l,c,d=0;d<r.length;d++)1<=e/r[d]&&-1===s.indexOf(r[d])&&(e-=r[d],s.push(r[d]),3<(l=c=r.length-(r.indexOf(r[d])+1))&&(l-=4*parseInt(l/4)),0<=(c=c)&&c<=3?c=0:4<=c&&c<=7?c=1:8<=c&&c<=11?c=2:12<=c&&c<=15&&(c=3),T(t+l*a,n+c*a),d=0)};return{init:function(t,e,n,a,i){g=(i=i||!1)?document.createElement("canvas"):document.getElementById("preview"),h=g.getContext("2d"),b="prematch"===e,y="live"===e,S="vSport"===e,k=null!==a?a:null;var o,r=s.defer(),i=(b?(g.width=640,g.height=1430,o=l("/img/bg-prematch-preview.jpg")):y?(g.width=640,g.height=1238,o=l("/img/bg-live-preview.jpg")):S&&(g.width=640,g.height=1336,o=l("/img/bg-v-sport-preview.jpg")),l("/img/times.png"));return s.all([o,i]).then(function(e){v=e[0],f=e[1],b?c(t,n):y?u(t):S&&p(t),r.resolve(g)}),r.promise}}}e.$inject=["$q","PACKAGE_URL","betslipSettings"],angular.module("tippmixCommonServices").factory("betslipPreview",e)}(),function(){function e(r,o,s,l){var e={};function c(e,t){var n,a,i;e.event&&(e=e.event)?(Array.isArray(e.markets)||r.$broadcast("betslip.defaultError"),(n=e.markets.find(function(e){return e.marketId===t.marketId}))?(Array.isArray(n.outcomes)||r.$broadcast("betslip.defaultError"),(a=n.outcomes.find(function(e){return e.outcomeNo===t.outcomeNo}))?(i=e.eventId+"-"+n.marketId+"-"+a.outcomeNo,o.itemIsExists(i)||o.toggleItem(e,n,a,!1)):r.$broadcast("betslip.defaultError")):r.$broadcast("betslip.defaultError")):r.$broadcast("betslip.defaultError")}return e.init=function(){var t,e,n,a,i,o=function(e){for(var t,n=decodeURIComponent(window.location.search.substring(1)).split("&"),a=0;a<n.length;a++)if((t=n[a].split("="))[0]===e)return void 0===t[1]||t[1]}("betslipapi");o&&((t=function(e){if("string"==typeof e)return(e=e.split("-"))[0]&&e[1]&&e[2]?{eventId:parseInt(e[0],10),marketId:parseInt(e[1],10),outcomeNo:parseInt(e[2],10)}:void 0}(o))?(o="betslipapi",a="",i=window.location.href,a=window.URLSearchParams?((n=new URLSearchParams(i.search)).delete(o),(e=new URL(i)).search=n.toString(),e.href):(n=new RegExp("([?&])".concat(o,"=.*?(&|$)"),"i"),i.href.replace(n,function(e,t,n){return"?"===t&&"&"===n?"?":""})),window.history&&window.history.pushState?window.history.pushState({},"",a):window.location.href=a,l.async(s.event+"/"+t.eventId+"/ungrouped?compatibility=v1",{},!1,"GET").then(function(e){e.event?c(e,t):l.async(s.liveEvent,{eventId:t.eventId}).then(function(e){c(e,t)},function(){r.$broadcast("betslip.defaultError")})},function(){r.$broadcast("betslip.defaultError")})):r.$broadcast("betslip.defaultError"))},e}e.$inject=["$rootScope","betslipStorage","apiUrls","httpService"],angular.module("tippmixCommonServices").factory("betslipApi",e)}(),function(){function e(e,l,c){var d,m=this;m.init=function(e,t,n){var a,i,o,r,s;c[e]&&(i="POST",o="data",r=a=null,s=c[e],"object"!==_typeof(s)||null===s||Array.isArray(s)?a=c[e]:(a=c[e].url,i=c[e].method,o=c[e].dataKey,r=c[e].additionalKeys),l.startPolling({name:e,url:a,method:i,pollingTime:t,params:n},function(e){if(d=e[o],e.date&&(m.realDatetime=e.date),r)for(var t=0;t<r.length;t++)m[r[t]]=e[r[t]]}))},e.$watch(function(){return d},function(e,t){e!==t&&(m.items=d)},!0)}e.$inject=["$scope","httpService","apiUrls"],angular.module("tippmixCommonWidgets").controller("PollingWidget",e)}(),function(){function e(e,t,a,i,o,r,s,l,n){var c,d=this,m=null,u=(d.eventId=null,d.event=null,d.betslipId=null,d.market=null,d.storage=l,d.custombetOffers=null,d.tempCustombetOffers=null,d.chosenCustombetOffer=null,d.additionDisabled=!1,new Glide(".glide",{perView:s.isMobile?1.2:3,rewind:!1,focusAt:s.isMobile?"center":0,perSwipe:s.isMobile?"":"|"}));function p(){s.isMobile&&(document.getElementById("custombet-offers__container").style.width=parseInt(window.innerWidth,10)-25+"px")}function v(n){(s.isMobile?[d.custombetOffers[n]]:d.custombetOffers.slice(n,n+3)).forEach(function(e,t){e={id:d.eventId,selections:e.markets.map(function(e){return{marketId:e.id,outcomeNo:e.outcome.no}})};a({method:"POST",url:"/custombet-api/v1/custombet/calculate/cached-odds",data:JSON.stringify({event:e}),headers:{"Content-Type":"application/json"}}).success(function(e){d.custombetOffers[n+t].error=!1,d.custombetOffers[n+t].odds=e.event.odds}).error(function(){return!(d.custombetOffers[n+t].error=!0)})})}u.on("run.after",function(){var e,t;v(u.index),s.isMobile||(e=u.index,t=document.getElementsByClassName("glide__arrow--right")[0],e+3>=d.custombetOffers.length?t.classList.add("glide__arrow--disabled"):t.classList.remove("glide__arrow--disabled"))}),d.init=function(e,t,n){d.eventId=n,p(),r[e]&&(o.startPolling({name:e,url:"".concat(r[e],"/").concat(n,"/ungrouped?compatibility=v1"),pollingTime:t,method:"GET"},function(e){c=e.event,d.event=e.event,d.market?"custombet"===d.market?(m=c.markets,d.markets=c.markets.filter(function(e){return e.isCustomBet})):(m=c.markets,d.markets=c.markets.filter(function(e){return e.marketGroupIds.includes(d.market)})):(m=c.markets,d.markets=e.event.markets),d.marketGroups=e.event.marketGroups,d.marketGroups.forEach(function(t){"all"===t.type?(t.count=m.length,t.name="Összes",t.id=null):"custombet"===t.type?(t.count=m.filter(function(e){return e.isCustomBet}).length,t.name="Fogadáskészítő",t.id="custombet"):t.count=m.filter(function(e){return e.marketGroupIds.includes(t.id)}).length}),d.marketGroups=d.marketGroups.filter(function(e){return 0!==e.count}),e.date&&(d.realDatetime=e.date)}),o.startPolling({name:"custombetOffers",url:"".concat(r[e],"/").concat(n,"/custombet-offers"),pollingTime:2*t,method:"GET"},function(e){d.custombetOffers=e.offers,i(function(){var e;0<d.custombetOffers.length&&(e=d.custombetOffers,d.tempCustombetOffers!==e&&u.mount(),v(u.index),d.tempCustombetOffers=e)},600)}))},d.handleAddOfferToBetslipButton=function(e){d.chosenCustombetOffer=e;d.additionDisabled=!1,0<(d.event.isLive?l.getLiveItemsLength():l.getPrematchItemsLength())?(l.itemIsExistsForCustombetOffers(d.eventId)&&(d.additionDisabled=!0),n.open({template:"custombetOffersActions",className:"ngdialog-betslip",showClose:!1,controller:["$scope",function(e){e.additionDisabled=d.additionDisabled,e.clearBetslip=function(){d.event.isLive?l.removeAllLive():l.removeAllPrematch(),d.toggleOfferItems("add"),e.closeThisDialog()},e.addToBetslip=function(){d.toggleOfferItems("add"),e.closeThisDialog()}}]})):d.toggleOfferItems("add")},d.toggleOfferItems=function(i){var o,r=[];null!==d.chosenCustombetOffer&&(o=d.chosenCustombetOffer.markets.map(function(t){var e=d.event.markets.find(function(e){return e.marketId===t.id});return r.push(e.outcomes.find(function(e){return e.outcomeNo===t.outcome.no})),e})).map(function(e,t){var n=t===o.length-1,a=d.event.eventId+"-"+e.marketId+"-"+r[t].outcomeNo;"add"===i?l.addItem(a,d.event,e,r[t],!1,n,!0):l.removeCustombetableItemByEventId(a,d.event.eventId)})},d.isBulletInteger=function(e){return e%3==0},e.$on("betslip.calculateCallError",function(){d.toggleOfferItems("remove")}),e.$on("betslip.calculateCallErrorNoAddItem",function(){d.toggleOfferItems("remove")}),t.setMarket=function(e){d.market=e,d.storage.setStorageMarket(e),d.storage.fetchCalculateIfNotExistsAvailableCustombetByEventId(d.eventId)},t.scrollLeft=function(){document.querySelector(".widget-market-groups__scroll").scrollLeft=$(".widget-market-groups__scroll").scrollLeft()-200},t.scrollRight=function(){document.querySelector(".widget-market-groups__scroll").scrollLeft=$(".widget-market-groups__scroll").scrollLeft()+200},t.$watch(function(){return c},function(e,t){e!==t&&c&&(d.items=[c])},!0),t.$watch(function(){return d.custombetOffers},function(e,t){e!==t&&c&&(d.items=[c])},!0),t.$watch(function(){return d.market},function(e,t){e!==t&&(d.markets=null===e?c.markets:"custombet"===e?c.markets.filter(function(e){return e.isCustomBet}):c.markets.filter(function(e){return e.marketGroupIds.includes(d.market)}))},!0),angular.element(window).on("resize",function(){p()})}e.$inject=["$rootScope","$scope","$http","$timeout","httpService","apiUrls","settings","betslipStorage","ngDialog"],angular.module("tippmixCommonWidgets").controller("eventPageWidget",e)}(),function(){function e(e,i,o){var r,s=this;s.init=function(e,t,n){var a;o[e]&&(a=["title","description"],i.startPolling({name:e,url:o[e],method:"GET",pollingTime:t,params:n},function(e){r=e.events,e.date&&(s.realDatetime=e.date);for(var t=0;t<a.length;t++)s[a[t]]=e[a[t]]}))},e.$watch(function(){return r},function(e,t){e!==t&&(s.items=r,s.items&&Array.isArray(s.items)&&(s.isHappyHourEmpty=0===s.items.filter(function(e){return e.markets&&null!==e.markets[0].happyHourEnd}).length))},!0)}e.$inject=["$scope","httpService","apiUrls"],angular.module("tippmixCommonWidgets").controller("SuperOddsWidget",e)}(),function(){function e(n,a,e,i,o,r,t){var s,l,c=this;function d(e,t){var n;if(null===e||0===e.length)return{id:0};for(n=e.length;n--;)if(e[n].id===t)return e[n]}function m(e){var t=[];if(null===e)return t;for(var n=e.length;n--;)t.push(e[n]);return t}function u(){c.openSelectorId=null}function p(e){var t=new Date,n=e.getFullYear()===t.getFullYear(),a=e.getMonth()===t.getMonth(),e=e.getDate()===t.getDate();return n&&a&&e}function v(){var e=document.querySelectorAll(".widget-events-results-event-header"),o=[],r=[];e.forEach(function(e){for(var t=e.closest(".widget-events-results-group"),n=(e.closest(".widget-events-results-event"),e.nextElementSibling);n&&!n.classList.contains("widget-events-results-event-content");)n=n.nextElementSibling;var a,i=n?n.querySelector(".widget-events-results-event-row-top"):null;t&&n&&((t=e.querySelector(".toggle"))&&t.classList.contains("state-open")&&(t=e.getBoundingClientRect(),a=n.getBoundingClientRect(),t.top<=72&&0<a.bottom-126&&(o.push(e),i&&r.push(i))))}),e.forEach(function(e){-1===o.indexOf(e)&&e.classList.contains("sticky-active")&&e.classList.remove("sticky-active")}),document.querySelectorAll(".widget-events-results-event-row-top").forEach(function(e){-1===r.indexOf(e)&&e.classList.contains("sticky-active")&&e.classList.remove("sticky-active")}),o.forEach(function(e){e.classList.contains("sticky-active")||e.classList.add("sticky-active")}),r.forEach(function(e){e.classList.contains("sticky-active")||e.classList.add("sticky-active")})}c.selected={sport:{},country:{},competition:{}},c.openSelectorId=null,c.market="0",c.disabledCountry=!0,c.disabledCompetition=!0,c.disabledSubmit=!0,c.disabledSubmitButton=!1,c.interval="1",c.sorting="date",c.displayType="date",c.q="",c.marketSelectValues=r.eventsResultsSelect.market,c.intervalSelectValues=r.eventsResultsSelect.interval,c.intervalSelectValuesKeys=Object.keys(c.intervalSelectValues),c.disabledDateSelector=!1,c.init=function(e){var t=a.search();c.selected.sport.id=t.sportid?parseInt(t.sportid):e,c.selected.country.id=t.countryid?parseInt(t.countryid):0,c.selected.competition.id=t.competitionid?parseInt(t.competitionid):0,c.selected.competition.type=t.competitiontype||null,t.market&&(c.market=t.market),t.interval&&(c.interval=t.interval),t.sorting&&(c.sorting=t.sorting),t.q&&(c.q=t.q),!t.date||1!==c.interval&&"1"!==c.interval?c.dt=new Date:((e=new Date).setFullYear(i("date")(t.date,"yyyy")),e.setMonth(i("date")(t.date,"M")-1),e.setDate(i("date")(t.date,"d")),c.dt=e),c.submit(),window.addEventListener("scroll",v),n(function(){v()},100),o.async("v2/tippmix/events/filter",{sportId:c.selected.sport.id,competitionGroupId:c.selected.country.id,resultFilter:!0}).then(function(e){c.data=e,c.data.competitions=m(e.competitions),null!==c.data.sports&&c.data.sports.unshift({id:0,name:r.allNames[0]}),null!==c.data.competitionGroups&&c.data.competitionGroups.unshift({id:0,name:r.allNames[1]}),null!==c.data.competitions&&c.data.competitions.unshift({id:0,name:r.allNames[2]}),c.selected.sport=d(c.data.sports,c.selected.sport.id),c.selected.country=d(c.data.competitionGroups,c.selected.country.id),c.selected.competition=d(c.data.competitions,c.selected.competition.id)})},c.select=function(e,t,n,a){u(),null!==e&&null!==t&&(c.selected[n]={id:e,name:t,type:a}),"sport"===n?(c.selected.country={id:0},c.selected.competition={id:0}):"country"===n&&(c.selected.competition={id:0}),"competition"!==n&&o.async("v2/tippmix/events/filter",{sportId:parseInt(c.selected.sport.id),competitionGroupId:c.selected.country?parseInt(c.selected.country.id):0,resultFilter:!0}).then(function(e){"sport"===n?(c.data.competitionGroups=e.competitionGroups,null!==c.data.competitionGroups&&c.data.competitionGroups.unshift({id:0,name:r.allNames[1]}),c.selected.country=d(c.data.competitionGroups,0)):"country"===n&&(c.data.competitions=m(e.competitions),r.isMobile&&null!==c.data.competitions&&c.data.competitions.unshift({id:0,name:r.allNames[2]}),c.selected.competition=d(c.data.competitions,0)),jQuery().mCustomScrollbar&&angular.element(".selector-country .dropdown").mCustomScrollbar({scrollInertia:600})})},c.toggle=function(e){c.openSelectorId===e?u():("datetime"!==e||c.disabledSubmit||(c.openSelectorId="datetime"),"sport"!==e||c.disabledSubmit?"country"!==e||c.disabledSubmit?"competition"!==e||c.disabledSubmit||c.selected.country&&0!==c.selected.country.id&&(c.openSelectorId="competition"):c.selected.sport&&0!==c.selected.sport.id&&(c.openSelectorId="country"):c.openSelectorId="sport")},c.toggleDetails=function(e){e.isDetailsOpen?e.isDetailsOpen=!1:((l=e).isDetailsOpen=!0,e.marketsTemporary||(e.marketsTemporary=e.markets)),n(function(){v()},50)},e.$watch(function(){return l},function(e,t){angular.isDefined(t)&&(t.isDetailsOpen=!1)}),c.submit=function(){s=n(function(){c.disabledSubmit=!0},300),a.url("?"+(t=[],e="",c.selected.sport&&0!==c.selected.sport.id&&t.push("sportid="+c.selected.sport.id),c.selected.country&&0!==c.selected.country.id&&t.push("countryid="+c.selected.country.id),c.selected.competition&&0!==c.selected.competition.id&&t.push("competitionid="+c.selected.competition.id),c.selected.competition&&c.selected.competition.type&&""!==c.selected.competition.type&&t.push("competitiontype="+c.selected.competition.type),c.market&&0!==c.market&&"0"!==c.market&&t.push("market="+c.market),c.interval&&0!==c.interval&&"0"!==c.interval&&t.push("interval="+c.interval),c.sorting&&""!==c.sorting&&t.push("sorting="+c.sorting),c.q&&""!==c.q&&t.push("q="+encodeURI(c.q)),!c.dt||1!==c.interval&&"1"!==c.interval||t.push("date="+i("date")(c.dt,"yyyy-MM-dd")),e=0<t.length?t.join("&"):e)),c.interval=parseInt(c.interval);var e,t={sportId:c.selected.sport?c.selected.sport.id:0,competitionGroupId:c.selected.country?c.selected.country.id:0,competitionId:c.selected.competition?c.selected.competition.id:0,competitionType:c.selected.competition?c.selected.competition.type:null,interval:c.interval,type:c.sorting,market:parseInt(c.market),searchBy:c.q};1===c.interval&&(t.date=new Date(i("date")(c.dt,"yyyy-MM-dd"))),o.async("tippmix/result",t).then(function(e){var t;if(c.isEmpty=!0,c.isEmptyOld=!0,e.data.normal||e.data.old){for(t=e.data.normal.length;t--;)(e.data.normal[t].sportCompetitions&&0<e.data.normal[t].sportCompetitions.length||e.data.normal[t].events&&0<e.data.normal[t].events.length)&&(c.isEmpty=!1);for(t=e.data.old.length;t--;)(e.data.old[t].sportCompetitions&&0<e.data.old[t].sportCompetitions.length||e.data.old[t].events&&0<e.data.old[t].events.length)&&(c.isEmptyOld=!1);c.isEmpty||(c.items=e.data.normal),c.isEmptyOld||(c.oldItems=e.data.old)}else{for(t=e.data.length;t--;)(e.data[t].sportCompetitions&&0<e.data[t].sportCompetitions.length||e.data[t].events&&0<e.data[t].events.length)&&(c.isEmpty=!1);c.isEmpty||(c.items=e.data)}c.displayType=c.sorting,n.cancel(s),c.disabledSubmit=!1,c.selectedDetails=""})},c.qKeypress=function(e){13===e.keyCode&&""!==c.q&&3<=c.q.length&&c.submit()},c.resetDate=function(){c.dt=new Date},c.qEmpty=function(){return c.q.length<3},c.olderDate=function(){return 180===parseInt(c.interval,10)},c.olderDaysRequirement=function(){c.olderDate()&&c.qEmpty()&&t.open({template:"eventResultsOlderDaysNotice",showClose:!1}).closePromise.then(function(){n(function(){angular.element(".input-search-result input").focus()})})},e.$watch(function(){return c.dt},function(e,t){if(e!==t){if(null===c.dt)return void(c.dt=new Date);var e=new Date(c.dt);1===c.interval?p(c.dt)?c.displayDate=i("date")(e.setDate(e.getDate()-1),"yyyy.MM.dd")+" - "+i("date")(c.dt,"yyyy.MM.dd"):c.displayDate=i("date")(c.dt,"yyyy.MM.dd"):3!==c.interval&&7!==c.interval&&180!==c.interval||(t=i("date")(c.dt,"yyyy.MM.dd"),e=i("date")(e.setDate(e.getDate()-c.interval),"yyyy.MM.dd"),c.displayDate=e+" - "+t)}u()}),e.$watch(function(){return c.interval},function(){var e,t=new Date;c.interval=parseInt(c.interval),1===c.interval?(t=new Date(c.dt),e=i("date")(c.dt,"yyyy.MM.dd"),c.disabledDateSelector=!1,p(c.dt)?(t=i("date")(t.setDate(t.getDate()-1),"yyyy.MM.dd"),c.displayDate=t+" - "+e):c.displayDate=e):3!==c.interval&&7!==c.interval&&180!==c.interval||(c.disabledDateSelector=!0,c.dt=new Date)}),e.$watch(function(){return c.selected},function(){c.disabledSubmit=!1,c.selected.sport&&0!==c.selected.sport.id?(c.disabledCountry=!1,c.selected.country&&0!==c.selected.country.id?c.disabledCompetition=!1:c.disabledCompetition=!0):(c.disabledCountry=!0,c.disabledCompetition=!0)},!0),e.$watch(function(){return c.q},function(e){180!==c.interval&&e.length<2&&(c.interval=1),""!==e&&e.length<3?c.disabledSubmitButton=!0:c.disabledSubmitButton=!1}),e.$on("$destroy",function(){window.removeEventListener("scroll",v)})}e.$inject=["$timeout","$location","$scope","$filter","httpService","settings","ngDialog"],angular.module("tippmixCommonWidgets").controller("EventResultsPageWidget",e)}(),function(){function e(e,n,a,i,o,m,r){var u,p,v=this,f=!1;function s(n,a){o.open({template:"bestCombinationFillBetWarningDialog",showClose:!1,controller:["$scope","betslipStorage",function(e,t){e.remove=function(){a&&(t.data.prematch.wagerIdCounter=2,t.data.prematch.wagerId=null),t.removeAllPrematch(),t.addQuickBet(n.quickBetItems,n.stake),e.closeThisDialog()},e.append=function(){a&&(t.data.prematch.wagerIdCounter=2,t.data.prematch.wagerId=null),t.addQuickBet(n.quickBetItems,n.stake),e.closeThisDialog()}}]})}v.init=function(e){var t=n.search();t.printid&&(f=!0,p=parseInt(t.printid)),a.startPolling({name:"recommendedBets",url:"tippmix/recommended-bets",pollingTime:e},function(e){u=e.data,e.date&&(v.realDatetime=e.date)})},v.fillBetslip=function(t){0===i.getPrematchItemsLength()?i.addQuickBet(t.quickBetItems,t.stake):i.data.prematch.wagerId?o.open({template:"betslipWagerWarning",className:"ngdialog-betslip",showClose:!1,closeByEscape:!1,closeByDocument:!1,controller:["$scope",function(e){e.continueBetting=function(){e.closeThisDialog(),s(t,!0)}}]}):s(t,!1)},e.$on("tab.select.best-combination",function(e,t){for(var n=v.items.length,a=null;n--;)v.items[n].name===t&&(a=v.items[n].quickBetId);v.printUrl=r.bestCombinationPrintUrl+"#?printid="+a}),e.$watch(function(){return u},function(e,t){if(e!==t){for(var n=[],a=0,i=u.length;a<i;a++){var o=u[a];if(!f||o.quickBetId===p){for(var r=1,s=0,l=o.quickBetItems.length;s<l;s++)r*=o.quickBetItems[s].fixedOdds;var c=m.rounding(r*o.stake,1),d=c/o.stake;1<d&&n.push({expectedPrize:m.rounding(c,3),name:o.name,quickBetId:o.quickBetId,quickBetItems:o.quickBetItems,stake:o.stake,totalOdds:d})}}v.items=n}},!0)}e.$inject=["$scope","$location","httpService","betslipStorage","ngDialog","betslipRounding","settings"],angular.module("tippmixCommonWidgets").controller("BestCombinationWidget",e)}(),function(){function e(t,s,e,l,c,d,r,m){var u=this,p=null;function v(e,t){if(null===e)return null;for(var n=e.length;n--;)if(e[n].id===t)return e[n]}function f(e){var t=[];if(null===e)return t;for(var n=e.length;n--;)t.push(e[n]);return t}function i(){u.openSelectorId=null}function g(){var e=[],t="";return u.selected.sport&&null!==u.selected.sport.id&&e.push("sportid="+u.selected.sport.id),u.selected.country&&null!==u.selected.country.id&&e.push("countryid="+u.selected.country.id),u.selected.competition&&null!==u.selected.competition.id&&e.push("competitionid="+u.selected.competition.id),u.selected.competition&&""!==u.selected.competition.type&&e.push("competitiontype="+u.selected.competition.type),u.minDate&&e.push("minDate="+c("date")(u.minDate,"yyyy-MM-dd")),u.maxDate&&e.push("maxDate="+c("date")(u.maxDate,"yyyy-MM-dd")),u.q&&""!==u.q&&e.push("q="+encodeURI(u.q)),u.market&&e.push("market="+u.market),u.oddsInterval[0]&&e.push("minOdds="+u.oddsInterval[0]),u.oddsInterval[1]&&e.push("maxOdds="+u.oddsInterval[1]),t=0<e.length?e.join("&"):t}function n(e){var e=e.toString(),t=e.indexOf(".");return-1===t?0:e.length-t-1}function o(e,t){t=n(t);return t=null!==e?Math.max(t,n(e)):t}function h(e,t,n){var a=t,a=Math.floor(+(t-e).toFixed(o(e,n))/n)*n+e;return a=parseFloat(a.toFixed(o(e,n)))}function b(e,t,n){for(var a=t,i=h(e,t,n);a!==i;)i=h(e,a+=n,n);return i}u.selected={},u.openSelectorId=null,u.market=null,u.disabledCountry=!0,u.disabledCompetition=!0,u.disabledSubmit=!0,u.oddsInterval=[],u.selectedOddsInterval=[],u.slider={range:!0,step:.01,min:1,max:9999,useDecimals:!0,disabled:!1,minMaxOddsIsEqual:!1},u.init=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=s.search(),n=t.sportid?parseInt(t.sportid):null,a=t.countryid?parseInt(t.countryid):null,i=t.competitionid?parseInt(t.competitionid):null,o=t.competitionType||"";e.isSubFilter,p=e.eventType,t.q&&(u.q=t.q),t.minDate&&(u.minDate=t.minDate),t.maxDate&&(u.maxDate=t.maxDate),t.market&&(u.market=t.market),r.async("v2/tippmix/events/filter",_objectSpread({sportId:n,competitionGroupId:a},p?{eventTypes:[p]}:{})).then(function(e){var t;u.data=e,u.data.competitions=f(e.competitions),null!==u.data.sports&&u.data.sports.unshift({id:null,name:m.allNames[0]}),null!==u.data.competitionGroups&&u.data.competitionGroups.unshift({id:null,name:m.allNames[1]}),null!==u.data.competitions&&u.data.competitions.unshift({id:null,name:m.allNames[2]}),null!==n?u.selected.sport=v(u.data.sports,n):jQuery.isEmptyObject(u.selected.sport)&&(u.selected.sport=u.data.sports[0]),null!==a?u.selected.country=v(u.data.competitionGroups,a):jQuery.isEmptyObject(u.selected.country)&&(u.selected.country=u.data.competitionGroups[0]),null!==i?u.selected.competition=function(e,t,n){if(null===e)return null;for(var a=e.length;a--;)if(n){if(e[a].id===t&&e[a].type===n)return e[a]}else if(e[a].id===t)return e[a]}(u.data.competitions,i,o):jQuery.isEmptyObject(u.selected.competition)&&(u.selected.competition=u.data.competitions[0]),e=b(1,10,u.slider.step),u.slider.disabled=!1,10<=e&&(u.slider.realMax=e,e=b(1,10,u.slider.step)),u.oddsInterval=[1,e],(u.slider.min=1)!==e?(u.slider.max=e,u.slider.minMaxOddsIsEqual=!1):(u.slider.max=e+u.slider.step,u.slider.minMaxOddsIsEqual=!0,u.slider.disabled=!0),u.selectedOddsInterval=[u.slider.min,u.slider.max],(t=s.search()).minOdds&&d(function(){u.oddsInterval[0]=parseFloat(t.minOdds)}),t.maxOdds&&d(function(){u.oddsInterval[1]=parseFloat(t.maxOdds)})})},u.select=function(e,t,n,a){i(),null!==t&&(u.selected[n]={id:e,name:t,type:a}),"sport"===n?(u.selected.country=null,u.selected.competition=null):"country"===n&&(u.selected.competition=null),"competition"!==n&&r.async("v2/tippmix/events/filter",_objectSpread({sportId:parseInt(u.selected.sport.id),competitionGroupId:u.selected.country?parseInt(u.selected.country.id):null},p?{eventTypes:[p]}:{})).then(function(e){"sport"===n?(u.data.competitionGroups=e.competitionGroups,null!==u.data.competitionGroups&&(u.data.competitionGroups.unshift({id:null,name:m.allNames[1]}),jQuery.isEmptyObject(u.selected.country)&&(u.selected.country=u.data.competitionGroups[0]))):"country"===n&&(u.data.competitions=f(e.competitions),m.isMobile&&(null!==u.data.competitions&&u.data.competitions.unshift({id:null,name:m.allNames[2]}),jQuery.isEmptyObject(u.selected.competition)&&(u.selected.competition=u.data.competitions[0]))),jQuery().mCustomScrollbar&&angular.element(".selector-country .dropdown").mCustomScrollbar({scrollInertia:600})})},u.toggle=function(e){u.openSelectorId===e?i():("datetime-start"!==e||u.disabledSubmit?"datetime-end"!==e||u.disabledSubmit||(u.openSelectorId="datetime-end"):u.openSelectorId="datetime-start","sport"!==e||u.disabledSubmit?"country"!==e||u.disabledSubmit?"competition"!==e||u.disabledSubmit||u.selected.country&&null!==u.selected.country.id&&(u.openSelectorId="competition"):u.selected.sport&&null!==u.selected.sport.id&&(u.openSelectorId="country"):u.openSelectorId="sport")},u.submit=function(){u.disabledSubmit=!0;var e=g();t.location.href=m.bettingUrl+(e=""!==e?"#?"+e:e)},u.search=function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=(u.slider.disabled=!0,u.disabledSubmit=!0,d(function(){e.disableParams||s.url("?"+g())},450),[null,null]),a=(u.slider.min===u.selectedOddsInterval[0]&&u.slider.max===u.selectedOddsInterval[1]||(n=_toConsumableArray(u.selectedOddsInterval)),document.querySelector('input[ng-model="FilterWidget.oddsInterval[0]"]')),i=document.querySelector('input[ng-model="FilterWidget.oddsInterval[1]"]'),a=a?a.value:"",i=i?i.value:"",o=""===a||null==a,r=""===i||null==i;o&&(u.selectedOddsInterval[0]=1,u.oddsInterval[0]=1,d(function(){var e=document.querySelector('input[ng-model="FilterWidget.oddsInterval[0]"]');e&&(e.value="1")},100)),r&&(u.selectedOddsInterval[1]=10,u.oddsInterval[1]=10,n[1]=u.slider.realMax||10,d(function(){var e=document.querySelector('input[ng-model="FilterWidget.oddsInterval[1]"]');e&&(e.value="10")},100)),o||r||(o=parseFloat(a.replace(",",".")),t=parseFloat(i.replace(",",".")),isNaN(o)||isNaN(t)||(t<o?(u.oddsInterval[0]=t,u.selectedOddsInterval[0]=t,u.oddsInterval[1]=t,u.selectedOddsInterval[1]=t,d(function(){var e=document.querySelector('input[ng-model="FilterWidget.oddsInterval[0]"]');e&&(e.value=t.toString().replace(".",","))},100)):(u.oddsInterval[0]=o,u.selectedOddsInterval[0]=o,u.oddsInterval[1]=t,u.selectedOddsInterval[1]=t))),null!==n[0]&&10===u.selectedOddsInterval[1]&&(n[1]=u.slider.realMax||10),l.$broadcast("filter.search",{sportId:u.selected.sport?u.selected.sport.id:null,countryId:u.selected.country?u.selected.country.id:null,competitionId:u.selected.competition?u.selected.competition.id:null,competitionType:u.selected.competition?u.selected.competition.type:"",minDate:c("date")(u.minDate,"yyyy-MM-dd"),maxDate:c("date")(u.maxDate,"yyyy-MM-dd"),q:u.q,market:u.market,minOdds:n[0],maxOdds:n[1]})},u.resetSearch=function(){u.q=null,u.selected={},u.openSelectorId=null,u.market=null,u.minDate=null,u.maxDate=null,s.url(""),u.oddsInterval[0]=u.slider.min,u.selectedOddsInterval[0]=u.slider.min,u.oddsInterval[1]=u.slider.max,u.selectedOddsInterval[1]=u.slider.max,l.$broadcast("filter.selected.reset")},u.resetMinDate=function(){u.minDate=null,i()},u.resetMaxDate=function(){u.maxDate=null,i()},u.qKeypress=function(e){13===e.keyCode&&d(function(){angular.element(".search button").trigger("click")})},e.$watch(function(){return u.minDate},function(e,t){i()}),e.$watch(function(){return u.maxDate},function(e,t){i()}),e.$watch(function(){return u.selected},function(e,t){u.disabledSubmit=!1,u.selected.sport&&null!==u.selected.sport.id?(u.disabledCountry=!1,u.selected.country&&null!==u.selected.country.id?u.disabledCompetition=!1:u.disabledCompetition=!0):(u.disabledCountry=!0,u.disabledCompetition=!0)},!0),e.$watch(function(){return u.selected.sport},function(e,t){e!==t&&l.$broadcast("filter.selected.sport",e)}),e.$watch(function(){return u.selected.country},function(e,t){e!==t&&l.$broadcast("filter.selected.country",e)}),e.$watch(function(){return u.selected.competition},function(e,t){e!==t&&l.$broadcast("filter.selected.competition",e)}),e.$watch(function(){return u.selectedOddsInterval[0]},function(e){u.oddsInterval[0]!==e&&(u.oddsInterval[0]=e)}),e.$watch(function(){return u.selectedOddsInterval[1]},function(e){u.oddsInterval[1]!==e&&(u.oddsInterval[1]=e)}),e.$watch(function(){return u.oddsInterval[0]},function(e){u.selectedOddsInterval[0]!==e&&(u.selectedOddsInterval[0]=e)}),e.$watch(function(){return u.oddsInterval[1]},function(e){u.selectedOddsInterval[1]!==e&&(u.selectedOddsInterval[1]=e)}),l.$on("filter.search.ready",function(){d(function(){u.slider.minMaxOddsIsEqual||(u.slider.disabled=!1),u.disabledSubmit=!1},600)})}e.$inject=["$window","$location","$scope","$rootScope","$filter","$timeout","httpService","settings"],angular.module("tippmixCommonWidgets").controller("FilterWidget",e)}(),function(){function e(e,a,i,o,r,s,t){var l,c,d=this,m=!1,u={name:"search",url:"v2/tippmix/events?compatibility=v1",defaultDatetime:null},p=null,v=null,f=null,g="",h=null,b=[],y=u.defaultDatetime,S=u.defaultDatetime,k=null,I=null,C=null,$=1;function x(){s.stopPolling(u.name);var e=y||null,t=S||null,n=(y&&(e=moment(r("huDate")(e)).startOf("day").format()),S&&(t=moment(r("huDate")(t)).endOf("day").format()),parseFloat(I)),a=parseFloat(C);s.startPolling({name:u.name,url:u.url,pollingTime:u.pollingTime,params:{search:k,sportId:p,competitionGroupId:v,competitionOrAliasId:f?{id:f,type:g||"competition"}:null,eventTypes:h?[h]:[],marketTypes:b,minDate:e,maxDate:t,pageSize:20,page:$,minOdds:n&&1<n?n:null,maxOdds:a&&a<10?a:null}},function(e){l=e,m&&(i.$broadcast("filter.search.ready"),o.cancel(c),o(function(){d.disabled=!1},600),m=!1)})}function w(){var e=t.bettingPrintUrl+"#"+a.url();null!==d.marketSelected&&(a.url()?e+="&":e+="?",e+="marketLabel="+encodeURIComponent(d.marketSelected.label)+"&marketTypes="+encodeURIComponent(JSON.stringify(d.marketSelected.marketTypes))),d.printUrl=e}d.pageCount=1,d.disabledPrev=!1,d.disabledNext=!1,d.currentPage="",d.pages=[],d.disabled=!1,d.selected={},d.marketSelected=null,d.marketLabel="",d.printMarketSelected={},d.init=function(e){var t=a.search();if(t.sportid&&(p=parseInt(t.sportid)||null),t.countryid&&(v=parseInt(t.countryid)||null),t.competitionid&&(f=parseInt(t.competitionid)||null),t.competitiontype&&(g=t.competitiontype),t.market&&(h=t.market),t.minDate&&(y=t.minDate),t.maxDate&&(S=t.maxDate),t.q&&(k=t.q),t.minOdds&&(I=t.minOdds),t.maxOdds&&(C=t.maxOdds),t.page&&($=parseInt(t.page)),t.marketTypes&&"undefined"!==t.marketTypes){try{var n=decodeURIComponent(t.marketTypes);n&&"undefined"!==n&&(b=JSON.parse(n))}catch(e){b=[]}d.printMarketSelected.marketTypes=b}else d.printMarketSelected.default=!0;if(t.marketLabel){try{d.marketLabel=decodeURIComponent(t.marketLabel)}catch(e){d.marketLabel=""}d.printMarketSelected.label=d.marketLabel}u.pollingTime=e,x(),w()},d.prevPage=function(){d.disabledPrev||1===$||--$},d.nextPage=function(){d.disabledNext||$===d.pageCount||($+=1)},i.$on("filter.search",function(e,t){p=t.sportId,v=t.countryId,f=t.competitionId,g=t.competitionType,k=t.q||"",h=t.market,y=t.minDate||u.defaultDatetime,S=t.maxDate||u.defaultDatetime,I=t.minOdds,C=t.maxOdds,$=1,a.search("page",$),x(),w(),m=!0,c=o(function(){d.disabled=!0})}),i.$on("filter.selected.sport",function(e,t){d.selected.sport=t}),e.$watch(function(){return d.marketSelected},function(e,t){e&&e.default&&null!==t?(b=[],x()):e&&e.marketTypes&&(b=e.marketTypes,x()),w()}),e.$watch(function(){return l},function(e,t){if(e!==t){if(d.data=l,d.pageCount=d.data._meta.pageCount,d.disabledPrev=!1,1===d.data._meta.currentPage&&(d.disabledPrev=!0),$===d.pageCount)d.disabledNext=!0;else{d.disabledNext=!1;for(var n=[],a=0;a<d.pageCount;a++)n.push(a+1);d.pages=n}d.page=$}},!0),e.$watch(function(){return $},function(e,t){e!==t&&(a.search("page",$),w(),x())}),e.$watch(function(){return d.page},function(e,t){e!==t&&($=d.page)})}e.$inject=["$scope","$location","$rootScope","$timeout","$filter","httpService","settings"],angular.module("tippmixCommonWidgets").controller("SportBetsWidget",e)}(),function(){function e(n,e,r,o,a,t,i,s,l,c,d,m,u,p,v,f,g,h,b){var y,S=this;function k(e){var t=595.28,n=841.89,a=e.toDataURL("image/png"),i=0,o=t,r=n;return e.height>n?(n=n/e.height,t<(e=e.width*n)?(o=t,r=i=0):(i=(t-e)/2,o=0)):r=0,{data:a,x:i,y:0,w:o,h:r}}function I(e){S[e].wagerId&&(S[e].wagerId=null,S[e].wagerIdCounter=2)}function C(){o(function(){var e=$("#betslip").height()+$("#header").height()+30;$("#wrapper").height()<e&&$("#wrapper").height(e)})}function x(e){if(e.bankerSelection=!e.bankerSelection,0<e.customBetItems.length)for(var t=0;t<e.customBetItems.length;t++)e.customBetItems[t].bankerSelection=e.bankerSelection;e.isVSport?S.storage.removeVSportMultiple():e.isLive?S.storage.removePrematchMultiple():S.storage.removeLiveMultiple()}function w(e,t){e.selected=!e.selected,e.selected&&angular.isDefined(S[t].globalStake)?e.stake=S[t].globalStake:e.stake=""}function O(e){var t="Tippmix_";return"prematch"===e?t+="prematch":"live"===e?t+="elo":"vSport"===e&&(t+="v-sport"),t+="_szelveny_"+i("date")(new Date,"yyyyMMdd_HHmmss")+".pdf"}function T(){var e,t,n=angular.element("body");angular.element(".betslip-overlay").get(0).scrollTop=0,n.data("no-scroll")?(n=angular.element("body"),t=angular.element("#header"),n.css({overflow:"","padding-right":""}).data("no-scroll",!1),t.css({"padding-right":""})):(n=angular.element("body"),t=angular.element("#header"),e=window.innerWidth-document.documentElement.clientWidth,n.css({overflow:"hidden","padding-right":e+"px"}).data("no-scroll",!0),t.css({"padding-right":e+"px"}))}function D(){b.superOdds&&0<S.storage.getPrematchItemsLength()&&g.async(b.superOdds,{},!1,"GET").then(function(e){if(e.events&&Array.isArray(e.events)){for(var t=e.events,n=null,a=t.length-1;0<=a;a--){var i=t[a];!function(a){var i=!1;return a.markets&&0<a.markets.length&&angular.forEach(a.markets,function(n){n.outcomes&&0<n.outcomes.length&&angular.forEach(n.outcomes,function(e){var t=a.eventId+"-"+n.marketId+"-"+e.outcomeNo;!(i=S.prematch.items&&S.prematch.items[t]?!0:i)&&S.prematch.items&&angular.forEach(S.prematch.items,function(e){e.isCustomBetable&&e.customBetItems&&0<e.customBetItems.length&&angular.forEach(e.customBetItems,function(e){e.id===t&&(i=!0)})})})}),i}(i)&&(n=i)}S.superOddsEvent=null,o(function(){S.superOddsEvent=n},10)}})}S.storage=c,S.prematch=c.data.prematch,S.live=c.data.live,S.vSport=c.data.vSport,S.openDropdown=!1,S.selectedTab="prematch",S.liveSummary={totalStake:0,totalOdds:0,expectedPrize:0,totalStakeWarning:!1,expectedPrizeWarning:!1,singleBetStakeError:!1},S.prematchSummary={totalStake:0,totalOdds:0,expectedPrize:0,totalStakeWarning:!1,expectedPrizeWarning:!1,singleBetStakeError:!1},S.vSportSummary={totalStake:0,totalOdds:0,expectedPrize:0,totalStakeWarning:!1,expectedPrizeWarning:!1,singleBetStakeError:!1},S.detailedPrematchTotalStake="",S.detailedLiveTotalStake="",S.detailedVSportTotalStake="",S.disabledPrint=!1,S.superOddsEvent=null,S.superOddsEventClosed=!1,S.init=function(t,e){S.messages=e||{},function e(){d.checkTippmixBets(S.storage),o(e,t)}(),0<S.storage.getItemsLength()&&(0<S.storage.getPrematchItemsLength()?(S.selectedTab="prematch",D()):0<S.storage.getLiveItemsLength()?S.selectedTab="live":0<S.storage.getVSportItemsLength()&&(S.selectedTab="vSport"),b.tippmixSettings&&g.async(b.tippmixSettings,{},!1,"GET").then(function(e){}))},S.toggleDropdown=function(e){e&&e.target!==e.currentTarget||0<S.storage.getItemsLength()&&(0<S.storage.getPrematchItemsLength()?(S.selectedTab="prematch",D()):0<S.storage.getLiveItemsLength()?S.selectedTab="live":0<S.storage.getVSportItemsLength()&&(S.selectedTab="vSport"),S.openDropdown=!S.openDropdown)},S.changeTab=function(e){n.scrollTo(0,0),S.selectedFrame=null,"prematch"===e&&0<S.storage.getPrematchItemsLength()?S.selectedTab="prematch":"live"===e&&0<S.storage.getLiveItemsLength()?S.selectedTab="live":"vSport"===e&&0<S.storage.getVSportItemsLength()&&(S.selectedTab="vSport")},S.changePrematchCombination=function(e){e.selected&&angular.isDefined(S.prematch.globalStake)?e.stake=S.prematch.globalStake:e.stake=""},S.changeLiveCombination=function(e){e.selected&&angular.isDefined(S.live.globalStake)?e.stake=S.live.globalStake:e.stake=""},S.changeVSportCombination=function(e){e.selected&&angular.isDefined(S.vSport.globalStake)?e.stake=S.vSport.globalStake:e.stake=""},S.changeBankerSelection=function(e,t){e.stopPropagation();var n=null,n=t.isVSport?"vSport":t.isLive?"live":"prematch";S[n].wagerId?(e.preventDefault(),s.open({template:"betslipWagerWarning",className:"ngdialog-betslip",showClose:!1,controller:["$scope",function(e){e.continueBetting=function(){I(n),x(t),e.closeThisDialog()}}]})):x(t)},S.toggleErrorMessage=function(e,t){e.stopPropagation(),t.isHidden=!t.isHidden},S.removeItem=function(e,t){e.stopPropagation();var n=null,n=t.isVSport?"vSport":t.isLive?"live":"prematch";S[n].wagerId?(e.preventDefault(),s.open({template:"betslipWagerWarning",className:"ngdialog-betslip",showClose:!1,controller:["$scope",function(e){e.continueBetting=function(){I(n),S.storage.removeItem(t.id,t.eventId),e.closeThisDialog()}}]})):S.storage.removeItem(t.id,t.eventId)},S.removeCustomBetItem=function(e,t,n,a){e.stopPropagation();var i=null,i=t.isVSport?"vSport":t.isLive?"live":"prematch";S[i].wagerId?(e.preventDefault(),s.open({template:"betslipWagerWarning",className:"ngdialog-betslip",showClose:!1,controller:["$scope",function(e){e.continueBetting=function(){I(i),S.storage.removeCustomBetItemById(t.id,n.id,a),e.closeThisDialog()}}]})):S.storage.removeCustomBetItemById(t.id,n.id,a)},S.changeCombination=function(e,t,n){e.stopPropagation(),S[n].wagerId?(e.preventDefault(),s.open({template:"betslipWagerWarning",className:"ngdialog-betslip",showClose:!1,controller:["$scope",function(e){e.continueBetting=function(){I(n),w(t,n),e.closeThisDialog()}}]})):w(t,n)},S.changeGlobalStake=function(t,n){S[n].wagerId&&s.open({template:"betslipWagerWarning",className:"ngdialog-betslip",showClose:!1,controller:["$scope",function(e){e.continueBetting=function(){I(n),angular.element(t.target).focus(),e.closeThisDialog()}}]})},S.addToGlobalStake=function(e){var t=c.getSession();"prematch"===S.selectedTab?((t=t.prematch).globalStake=(parseInt(t.globalStake)||0)+parseInt(e),S.prematch.globalStake=t.globalStake):"live"===S.selectedTab?((t=t.live).globalStake=(parseInt(t.globalStake)||0)+parseInt(e),S.live.globalStake=t.globalStake):"vSport"===S.selectedTab&&((t=t.vSport).globalStake=(parseInt(t.globalStake)||0)+parseInt(e),S.vSport.globalStake=t.globalStake)},S.selectEvent=function(e){e+=1;S.selectedFrame===e?S.selectedFrame=null:S.selectedFrame=e},S.closeSuperOddsEvent=function(){S.superOddsEventClosed=!0},S.openWagerInfo=function(){s.open({template:"betslipWagerInfo",className:"ngdialog-betslip",showClose:!1,closeByEscape:!1,closeByDocument:!1,controller:["$scope",function(e){e.betslip=S,e.try=function(){S.getWagerId(),e.closeThisDialog()}}]})},S.getWagerId=function(){var e,n;(e=angular.element("#blank")).length&&""===e.val()&&(e=angular.copy(c.getSession()),n={items:{},multiple:{},gameType:"vSport"===S.selectedTab?"v-sport":"sport"},"prematch"===S.selectedTab?e=e.prematch:"live"===S.selectedTab?e=e.live:"vSport"===S.selectedTab&&(e=e.vSport),angular.forEach(e.items,function(e,t){0<e.customBetItems.length?n.items[t]={eventId:e.eventId,eventVersion:e.eventVersion,marketId:e.marketId,marketVersion:e.marketVersion,bankerSelection:e.bankerSelection,outcomeNo:e.outcomeNo,customBetOdds:e.fixedOdds,customBetItems:e.customBetItems}:n.items[t]={eventId:e.eventId,eventVersion:e.eventVersion,marketId:e.marketId,marketVersion:e.marketVersion,bankerSelection:e.bankerSelection,outcomeNo:e.outcomeNo,outcomeOdds:e.fixedOdds}}),angular.forEach(e.multiple,function(e,t){e.selected&&(n.multiple[t]={selected:e.selected})}),n.globalStake=e.globalStake,g.asyncWithjQuery(h.redirectUrl,n,!0,!0).done(function(e){e.success&&r.$apply(function(){S[S.selectedTab].wagerId=e.wagerId,S[S.selectedTab].wagerIdCounter?S[S.selectedTab].wagerIdCounter=2:S[S.selectedTab].wagerIdCounter=1,"prematch"===S.selectedTab?S.prematchSummary.totalStake:"live"===S.selectedTab?S.liveSummary.totalStake:"vSport"===S.selectedTab&&S.vSportSummary.totalStake,t.retailerId&&t.retailerId,"undefined"!=typeof PostAffTracker&&(PostAffTracker.createSale().setOrderID(e.wagerId),PostAffTracker.register()),s.open({template:"betslipWagerSuccess",className:"ngdialog-betslip",showClose:!1,closeByEscape:!1,closeByDocument:!1,data:{wagerId:S[S.selectedTab].wagerId},controller:["$scope",function(e){e.disabledResetBetslipButton=!1,e.resetBetslip=function(){e.disabledResetBetslipButton=!0,o(function(){"prematch"===S.selectedTab?S.storage.removeAllPrematch():"live"===S.selectedTab?S.storage.removeAllLive():"vSport"===S.selectedTab&&S.storage.removeAllVSport(),location.href=h.homePageUrl,e.closeThisDialog()},5e3)}}]})})}))},S.printPrematch=function(){y=o(function(){S.disabledPrint=!0},300);var e=[],t=angular.element('[data-pdf="prematch"]');e.push(html2canvas(t[0])),10<S.storage.getPrematchItemsLength()&&e.push(html2canvas(t[1])),a.all(e).then(function(e){for(var t=new jsPDF("p","pt","a4"),n=0,a=e.length;n<a;n++){var i=k(e[n]);t.addImage(i.data,"PNG",i.x,i.y,i.w,i.h),n+1!==a&&t.addPage()}t.save(O("prematch")),o.cancel(y),S.disabledPrint=!1})},S.printLive=function(){y=o(function(){S.disabledPrint=!0},300);var e=angular.element('[data-pdf="live"]');html2canvas(e[0]).then(function(e){var t=new jsPDF("p","pt","a4"),e=k(e);t.addImage(e.data,"PNG",e.x,e.y,e.w,e.h),t.save(O("live")),o.cancel(y),S.disabledPrint=!1})},S.printVSport=function(){y=o(function(){S.disabledPrint=!0},300);var e=angular.element('[data-pdf="v-sport"]');html2canvas(e[0]).then(function(e){var t=new jsPDF("p","pt","a4"),e=k(e);t.addImage(e.data,"PNG",e.x,e.y,e.w,e.h),t.save(O("vSport")),o.cancel(y),S.disabledPrint=!1})},S.openPreview=function(e,t){t=t||null,S.selectedPreview=e,S.selectedTab=null,n.scrollTo(0,0),"prematch"===e?10<S.storage.getPrematchItemsLength()?(S.selectedPrematchPreview=1,v.init(S.prematch,"prematch",S.selectedPrematchPreview,t)):v.init(S.prematch,"prematch",null,t):"live"===e?v.init(S.live,"live",null,t):"vSport"===e&&v.init(S.vSport,"vSport",null,t)},S.closePreview=function(){n.scrollTo(0,0);var e=S.selectedPreview;S.selectedPreview=null,S.selectedTab=e},S.changePrematchPreview=function(e){S.selectedPrematchPreview=e,v.init(S.prematch,"prematch",S.selectedPrematchPreview)},S.clearStatusCode=function(e,t){e.preventDefault(),e.stopPropagation(),t.statusCode=0,t.combinationBanFromBetslipCheck=!1},S.getPrematchButtonDisableStatus=function(){return S.disabledPrint||0===S.prematchSummary.totalOdds||S.prematchSummary.totalStakeWarning||S.prematchSummary.expectedPrizeWarning||S.prematchSummary.singleBetStakeError},S.getLiveButtonDisableStatus=function(){return S.disabledPrint||0===S.liveSummary.totalOdds||S.liveSummary.totalStakeWarning||S.liveSummary.expectedPrizeWarning||S.liveSummary.singleBetStakeError},S.getVSportButtonDisableStatus=function(){return S.disabledPrint||0===S.vSportSummary.totalOdds||S.vSportSummary.totalStakeWarning||S.vSportSummary.expectedPrizeWarning||S.vSportSummary.singleBetStakeError},r.$watch(function(){return S.prematch},function(e,t){if(S.openPrematchPreview=!1,S.prematchSummary.totalStakeWarning=!1,S.prematchSummary.expectedPrizeWarning=!1,S.prematchSummary.singleBetStakeError=!1,S.prematchSummary.totalStake=0,S.prematchSummary.expectedPrize=0,e!==t){for(var n in S.prematch.multiple){var a=S.prematch.multiple[n];a.selected&&angular.isDefined(S.prematch.globalStake)&&(a.stake=S.prematch.globalStake)}if(S.detailedPrematchTotalStake="",!r.isPrematchStakeError&&(u.calculateMultiple(S.prematch,S.prematchSummary),angular.isDefined(S.prematch.globalStake)&&""!==S.prematch.globalStake&&null!==S.prematch.globalStake)){var i=[];for(n in S.prematch.multiple)S.prematch.multiple[n].selected&&i.push(S.prematch.multiple[n].unitCount);0<i.length&&(1===i.length?S.detailedPrematchTotalStake=i+"*"+S.prematch.globalStake.toString():S.detailedPrematchTotalStake="("+i.join("+")+")*"+S.prematch.globalStake.toString())}}var o;S.prematchSummary.expectedPrize=p.rounding(S.prematchSummary.expectedPrize,3),0===S.prematchSummary.totalStake?S.prematchSummary.totalOdds=0:(S.prematchSummary.totalOdds=S.prematchSummary.expectedPrize/S.prematchSummary.totalStake,S.prematch.multiple&&(o=!1,S.prematch.multiple.single&&S.prematch.multiple.single.selected&&parseInt(S.prematch.multiple.single.stake)<f.minStakeType&&(S.prematchSummary.singleBetStakeError=!0),angular.forEach(S.prematch.multiple,function(e){if(e.selected&&(e.totalStake<f.minStakeWager&&(o=!0),!S.prematchSummary.expectedPrizeWarning))for(var t=e.subExpectedPrizes.length;t--;)if(2e6<e.subExpectedPrizes[t]){S.prematchSummary.expectedPrizeWarning=!0;break}}),S.prematchSummary.totalStakeWarning=o))},!0),r.$watch(function(){return S.prematch.items},function(e,t){d.checkCombinationBan(S.prematch.items),d.checkCombinationCountBan(S.prematch.items),m.generate(S.prematch,{singleCombination:!0}),e&&t&&Object.keys(e).length>Object.keys(t).length&&D()},!0),r.$watch(function(){return S.prematch.globalStake},function(e,t){e!==t&&I("prematch")},!0),r.$watch(function(){return S.live},function(e,t){if(S.openLivePreview=!1,S.liveSummary.totalStakeWarning=!1,S.liveSummary.expectedPrizeWarning=!1,S.liveSummary.singleBetStakeError=!1,S.liveSummary.totalStake=0,S.liveSummary.expectedPrize=0,e!==t){for(var n in S.live.multiple){var a=S.live.multiple[n];a.selected&&angular.isDefined(S.live.globalStake)&&(a.stake=S.live.globalStake)}if(S.detailedLiveTotalStake="",!r.isLiveStakeError&&(u.calculateMultiple(S.live,S.liveSummary),angular.isDefined(S.live.globalStake)&&""!==S.live.globalStake&&null!==S.live.globalStake)){var i=[];for(n in S.live.multiple)S.live.multiple[n].selected&&i.push(S.live.multiple[n].unitCount);0<i.length&&(1===i.length?S.detailedLiveTotalStake=i+"*"+S.live.globalStake.toString():S.detailedLiveTotalStake="("+i.join("+")+")*"+S.live.globalStake.toString())}}var o;S.liveSummary.expectedPrize=p.rounding(S.liveSummary.expectedPrize,3),0===S.liveSummary.totalStake?S.liveSummary.totalOdds=0:(S.liveSummary.totalOdds=S.liveSummary.expectedPrize/S.liveSummary.totalStake,S.liveSummary.totalStake<f.minStakeWager&&(S.liveSummary.totalStakeWarning=!0),S.live.multiple&&(o=!1,S.live.multiple.single&&S.live.multiple.single.selected&&parseInt(S.live.multiple.single.stake)<f.minStakeType&&(S.liveSummary.singleBetStakeError=!0),angular.forEach(S.live.multiple,function(e){if(e.selected&&(e.totalStake<f.minStakeWager&&(o=!0),!S.liveSummary.expectedPrizeWarning))for(var t=e.subExpectedPrizes.length;t--;)if(2e6<e.subExpectedPrizes[t]){S.liveSummary.expectedPrizeWarning=!0;break}}),S.liveSummary.totalStakeWarning=o))},!0),r.$watch(function(){return S.live.items},function(e,t){d.checkCombinationBan(S.live.items),d.checkCombinationCountBan(S.live.items),m.generate(S.live,{singleCombination:!0,specialCombination:!1})},!0),r.$watch(function(){return S.live.globalStake},function(e,t){e!==t&&I("live")},!0),r.$watch(function(){return S.vSport},function(e,t){if(S.openVSportPreview=!1,S.vSportSummary.totalStakeWarning=!1,S.vSportSummary.expectedPrizeWarning=!1,S.vSportSummary.singleBetStakeError=!1,S.vSportSummary.totalStake=0,S.vSportSummary.expectedPrize=0,e!==t){for(var n in S.vSport.multiple){var a=S.vSport.multiple[n];a.selected&&angular.isDefined(S.vSport.globalStake)&&(a.stake=S.vSport.globalStake)}if(S.detailedVSportTotalStake="",!r.isVSportStakeError&&(u.calculateMultiple(S.vSport,S.vSportSummary),angular.isDefined(S.vSport.globalStake)&&""!==S.vSport.globalStake&&null!==S.vSport.globalStake)){var i=[];for(n in S.vSport.multiple)S.vSport.multiple[n].selected&&i.push(S.vSport.multiple[n].unitCount);0<i.length&&(1===i.length?S.detailedVSportTotalStake=i+"*"+S.vSport.globalStake.toString():S.detailedVSportTotalStake="("+i.join("+")+")*"+S.vSport.globalStake.toString())}}var o;S.vSportSummary.expectedPrize=p.rounding(S.vSportSummary.expectedPrize,3),0===S.vSportSummary.totalStake?S.vSportSummary.totalOdds=0:(S.vSportSummary.totalOdds=S.vSportSummary.expectedPrize/S.vSportSummary.totalStake,S.vSport.multiple&&(o=!1,S.vSport.multiple.single&&S.vSport.multiple.single.selected&&parseInt(S.vSport.multiple.single.stake)<f.vSportMinStakeType&&(S.vSportSummary.singleBetStakeError=!0),angular.forEach(S.vSport.multiple,function(e){if(e.selected&&(e.totalStake<f.vSportMinStakeWager&&(o=!0),!S.vSportSummary.expectedPrizeWarning))for(var t=e.subExpectedPrizes.length;t--;)if(2e6<e.subExpectedPrizes[t]){S.vSportSummary.expectedPrizeWarning=!0;break}}),S.vSportSummary.totalStakeWarning=o))},!0),r.$watch(function(){return S.vSport.items},function(e,t){d.checkCombinationBan(S.vSport.items,{vSport:!0}),d.checkCombinationCountBan(S.vSport.items),m.generate(S.vSport,{singleCombination:!0})},!0),r.$watch(function(){return S.vSport.globalStake},function(e,t){e!==t&&I("vSport")},!0),r.$watch(function(){return S.openDropdown},function(e,t){e!==t&&(e?C():$("#wrapper").removeAttr("style"),T())}),r.$watch(function(){return S.selectedTab},function(e,t){e!==t&&C()}),e.$on("betslip.showToast",function(){S.storage.showToastMessage(S.messages)}),e.$on("betslip.removeItem",function(){S.selectedFrame=null,0===S.storage.getItemsLength()&&(S.openDropdown=!1,S.prematch.globalStake="",S.live.globalStake="",S.vSport.globalStake="",S.superOddsEvent={})}),e.$on("betslip.removePrematchItem",function(){0===S.storage.getPrematchItemsLength()?(S.prematch.globalStake="",S.superOddsEvent={},0<S.storage.getLiveItemsLength()?S.selectedTab="live":0<S.storage.getVSportItemsLength()&&(S.selectedTab="vSport")):D()}),e.$on("betslip.removeLiveItem",function(){0===S.storage.getLiveItemsLength()&&(S.live.globalStake="",0<S.storage.getPrematchItemsLength()?S.selectedTab="prematch":0<S.storage.getVSportItemsLength()&&(S.selectedTab="vSport"))}),e.$on("betslip.removeVSportItem",function(){0===S.storage.getVSportItemsLength()&&(S.vSport.globalStake="",0<S.storage.getPrematchItemsLength()?S.selectedTab="prematch":0<S.storage.getLiveItemsLength()&&(S.selectedTab="live"))})}e.$inject=["$window","$rootScope","$scope","$timeout","$q","$cookies","$filter","ngDialog","PACKAGE_URL","betslipStorage","betslipService","betslipCombination","betslipCalculator","betslipRounding","betslipPreview","betslipSettings","httpService","settings","apiUrls"],angular.module("tippmixCommonWidgets").controller("BetslipWidget",e),window.handleBettingRedirect=function(e,t){e.preventDefault(),(window.location.protocol+"//"+window.location.host+window.location.pathname).replace(/\/$/,"")===(t=t.replace(/\/$/,""))?window.location.reload():window.location.href=t}}(),angular.module("tippmixCommonWidgets").controller("FaqWidget",function(){this.toggleAnswer=function(e){e.preventDefault();e=angular.element(e.currentTarget).parent();e.hasClass("state-open")?e.removeClass("state-open"):(angular.element(".questions li").removeClass("state-open"),e.addClass("state-open"))},this.openCategory=function(e){e.preventDefault();var e=angular.element(e.currentTarget).parent(),t=angular.element(".questions"),n=t[e.index()];angular.isDefined(n)&&(angular.element(".categories li").removeClass("state-active"),e.addClass("state-active"),t.removeClass("state-active"),angular.element(n).addClass("state-active"))}}),function(){function e(e,t){var n;n=void 0!==n?n:"body",(n=$(n).find(".datepicker").not(".custom-datepicker")).length&&$(n).each(function(e){var t,n={dateFormat:"yy. mm. dd.",beforeShow:function(e,t){$(t.dpDiv).addClass("draw-information-datepicker")}},a=($(this).attr("date-range-start")&&(n.onClose=function(e){e={minDate:e};$(this).parent(".date-range").children("[date-range-end]").datepicker("option",e)}),$(this).attr("date-range-min")&&(a=parseInt($(this).attr("date-range-min")),(t=new Date).setDate(t.getDate()-a),jQuery.extend(n,{minDate:t})),$(this).attr("date-range-end")&&(n.onClose=function(e){e={maxDate:e};$(this).parent(".date-range").children("[date-range-start]").datepicker("option",e)}),$(this).data("datepicker"));jQuery.extend(n,a),n.altField&&(n.onSelect=function(){$(n.altField).trigger("change")}),$(this).datepicker(n)}),Date.prototype.getWeek=function(){var e=new Date(this.valueOf()),t=(this.getDay()+6)%7,t=(e.setDate(e.getDate()-t+3),e.valueOf());return e.setMonth(0,1),4!=e.getDay()&&e.setMonth(0,1+(4-e.getDay()+7)%7),1+Math.ceil((t-e)/6048e5)},Date.prototype.getWeekYear=function(){var e=new Date(this.valueOf());return e.setDate(e.getDate()-(this.getDay()+6)%7+3),e.getFullYear()},$(".prev-week, .next-week").on("click",function(e){e.preventDefault();var e=$(this).parents("form"),t=$(e).find("input[name=year]").val(),n=$(e).find("input[name=week]").val(),t=new Date(t,0,4+7*(n-1));$(this).hasClass("prev-week")&&t.setDate(t.getDate()-7),$(this).hasClass("next-week")&&t.setDate(t.getDate()+7),$(e).find("input[name=year]").val(t.getWeekYear()),$(e).find("input[name=week]").val(t.getWeek()),$(e).attr("action",$(e).attr("action").split("?")[0]),$(e).submit()}),$(".prev-round, .next-round").on("click",function(e){e.preventDefault();e=$(this).parents("form");if($("#next-draw-id").length&&$("#previous-draw-id").length)return t=0,$(this).hasClass("prev-round")&&(t=$("#previous-draw-id").val()),$(this).hasClass("next-round")&&(t=$("#next-draw-id").val()),$(e).find("input[name=draw_id]").val(t),void $(e).submit();var t=$(e).find("input[name=year]").val(),n=$(e).find("input[name=week]").val(),a=$(e).find("input[name=round]").val(),t=new Date(t,0,1+7*(n-1));$(this).hasClass("prev-round")&&(2==a?a=1:(a=2,t.setDate(t.getDate()-7))),$(this).hasClass("next-round")&&(1==a?a=2:(a=1,t.setDate(t.getDate()+7))),$(e).find("input[name=year]").val(t.getFullYear()),$(e).find("input[name=week]").val(t.getWeek()),$(e).find("input[name=round]").val(a),$(e).submit()}),$(".prev-day, .next-day").on("click",function(e){e.preventDefault();var e=$(this).parents("form"),t=$(e).find("input[name=year]").val(),n=$(e).find("input[name=week]").val(),a=$(e).find("input[name=day]").val(),t=new Date(t,0,4+7*(n-1)),n=0==t.getDay()?7:t.getDay();t.setDate(t.getDate()+(a-n)),$(this).hasClass("prev-day")&&t.setDate(t.getDate()-1),$(this).hasClass("next-day")&&t.setDate(t.getDate()+1),$(e).find("input[name=year]").val(t.getWeekYear()),$(e).find("input[name=week]").val(t.getWeek()),$(e).find("input[name=day]").val(0==t.getDay()?7:t.getDay()),$(e).attr("action",$(e).attr("action").split("?")[0]),$(e).submit()})}e.$inject=["$scope","$rootScope"],angular.module("tippmixCommonWidgets").controller("drawInformationWidget",e)}(),function(){function e(e,a,t,n,i,o,r,s){var l,c,d,m=this,u=!1,p={name:"v-sport",url:r.vSportApiUrl+"tippmix/competition-groups/vsport",searchUrl:r.vSportApiUrl+"tippmix/search",defaultDatetime:"0001-01-01T00:00:00.000Z"},v=0,f=0,g=0,h=0,b=p.defaultDatetime,y="",S=null,k=null,I=null,C=null,$=null;function x(){o.startPolling({name:p.name,url:p.url,pollingTime:p.pollingTime,noApiUri:!0},function(e){for(var t=[],n=0;n<e.data.length&&!(2<=n);n++)t.push(e.data[n]),0===n&&""!==C&&"Tippmix vSport Tab left"!==C&&(t[0].name=C),1===n&&""!==$&&"Tippmix vSport Tab right"!==$&&(t[1].name=$);m.competitionsArray=t,m.competitionsArray.forEach(function(e){e.id===I&&(I=e.id)}),null===I&&void 0!==m.competitionsArray[0]&&(I=m.competitionsArray[0].id)})}function w(){o.stopPolling(p.name)}m.streamBaseUrl="http://schedulerzrh.aitcloud.de/retail_scheduler/display/index/schedule:",m.pageCount=1,m.currentRound=1,m.nextRound=2,m.disabledPrev=!1,m.disabledNext=!1,m.currentPage="",m.round=m.currentRound,m.pages=[],m.disabled=!1,m.competitionsArray=[],m.selectedTabIndex=0,m.init=function(e,t){var n=a.search();t&&(C=t.leftTabTitle,$=t.rightTabTitle),n.sportid&&(v=parseInt(n.sportid)),n.countryid&&(f=parseInt(n.countryid)),n.competitionid&&(g=parseInt(n.competitionid)),n.market&&(h=parseInt(n.market)),n.date&&(b=n.date),n.q&&(y=n.q),n.page&&parseInt(n.page),p.pollingTime=e,n.nextRound&&(m.round=m.nextRound),t=r.bettingPrintUrl+"#"+a.url(),m.printUrl=t},m.selectRound=function(e){m.round=e},m.hasMarketWithVisibleOdds=function(e){return s.eventPageLink.hasMarketWithVisibleOdds(e)},m.remainingCount=function(e){var t=s.eventPageLink.hasMarketWithVisibleOdds(e),e=e.totalMarketCount;return t&&e--,e},m.toggleDetails=function(e){e.isDetailsOpen?e.isDetailsOpen=!1:(c=e).isDetailsOpen=!0},e.$watch(function(){return l},function(e,t){e!==t&&(m.data&&l.events.forEach(function(e){for(var t=0;t<m.data.events.length;t++)if(m.data.events[t].eventId===e.eventId&&m.data.events[t].isDetailsOpen){e.markets=m.data.events[t].markets,e.isDetailsOpen=!0;break}}),m.data=l,m.competitionsArray.events=l)},!0),e.$on("tab.select.vsport-tabs",function(e,t,n){m.competitionsArray.length&&void 0!==m.competitionsArray[n]&&(I=m.competitionsArray[n].id,m.selectedTabIndex=n)}),e.$watch(function(){return m.competitionsArray},function(){m.competitionsArray.length&&o.async(p.searchUrl,{fieldValue:y,sportId:v,competitionGroupId:I||f,competitionId:g,type:h,date:b,minOdds:S,maxOdds:k,parse:{date:["date"]},round:m.round},!0).then(function(e){l=e.data,e.date&&(m.realDatetime=e.date),u&&(t.$broadcast("filter.search.ready"),n.cancel(d),m.disabled=!1,u=!1)})}),e.$watch(function(){return c},function(e,t){angular.isDefined(t)&&(t.isDetailsOpen=!1)}),e.$watch(function(){return m.round},function(e,t){w(),x()}),e.$watch(function(){return I},function(e,t){w(),x()}),e.$watch(function(){return m.page},function(e,t){e!==t&&m.page})}e.$inject=["$scope","$location","$rootScope","$timeout","$sce","httpService","settings","tippmixUtilities"],angular.module("tippmixCommonWidgets").controller("VSportWidget",e)}(),function(){function e(e,n,t,a,i,o,r,s){var l,c,d=this,m=!1,u={name:"outright",url:r.vSportApiUrl+"tippmix/search",defaultDatetime:"0001-01-01T00:00:00.000Z"},p=0,v=0,f=0,g=u.defaultDatetime,h="";d.streamBaseUrl="http://schedulerzrh.aitcloud.de/retail_scheduler/display/index/schedule:",d.pageCount=1,d.disabledPrev=!1,d.disabledNext=!1,d.currentPage="",d.pages=[],d.disabled=!1,d.init=function(e){var t=n.search();t.sportid&&(p=parseInt(t.sportid)),t.countryid&&(v=parseInt(t.countryid)),t.competitionid&&(f=parseInt(t.competitionid)),t.market&&parseInt(t.market),t.date&&(g=t.date),t.q&&(h=t.q),t.page&&parseInt(t.page),u.pollingTime=e,t=r.bettingPrintUrl+"#"+n.url(),d.printUrl=t},d.startPolling=function(){o.startPolling({name:u.name,url:u.url,pollingTime:u.pollingTime,params:{fieldValue:h,sportId:p,competitionGroupId:v,competitionId:f,type:3,date:g,minOdds:null,maxOdds:null,parse:{date:["date"]}},noApiUri:!0},function(e){l=e.data,e.date&&(d.realDatetime=e.date),m&&(t.$broadcast("filter.search.ready"),a.cancel(void 0),d.disabled=!1,m=!1)})},d.stopPolling=function(){o.stopPolling(u.name)},d.remainingCount=function(e){return s.eventPageLink.getRemainingCount(e)},d.toggleDetails=function(e){e.isDetailsOpen?e.isDetailsOpen=!1:(c=e).isDetailsOpen=!0},e.$watch(function(){return l},function(e,t){e!==t&&(d.data&&l.events.forEach(function(e){for(var t=0;t<d.data.events.length;t++)if(d.data.events[t].eventId===e.eventId&&d.data.events[t].isDetailsOpen){e.markets=d.data.events[t].markets,e.isDetailsOpen=!0;break}}),d.data=l)},!0),e.$watch(function(){return c},function(e,t){angular.isDefined(t)&&(t.isDetailsOpen=!1)}),e.$watch(function(){return d.page},function(e,t){e!==t&&d.page})}e.$inject=["$scope","$location","$rootScope","$timeout","$sce","httpService","settings","tippmixUtilities"],angular.module("tippmixCommonWidgets").controller("vSportOutrightWidget",e)}(),function(){function e(n,a,i,o,r){var s,t,l=this,e=(l.openSelectorId=null,l.disabledSubmit=!1,l.disabledSubmitButton=!0,l.q="",l.dateDropdownIsOpen=!1,l.disabledDateSelector=!1,new Date),c=e.getDate(),d=e.getMonth()+1,m=e.getFullYear(),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()-7),u=e.getDate(),p=e.getMonth()+1,e=e.getFullYear();u<10&&(u="0"+u),p<10&&(p="0"+p),l.maxDate=m+"-"+(d=d<10?"0"+d:d)+"-"+(c=c<10?"0"+c:c),l.minDate=e+"-"+p+"-"+u,l.init=function(){var e,t=a.search();t.q&&(l.q=t.q),t.date?((e=new Date).setFullYear(o("date")(t.date,"yyyy")),e.setMonth(o("date")(t.date,"M")-1),e.setDate(o("date")(t.date,"d")),l.dt=e):l.dt=new Date,l.displayDate=o("date")(l.dt,"yyyy.MM.dd")},l.toggleDetails=function(e){e.isDetailsOpen?e.isDetailsOpen=!1:((t=e).isDetailsOpen=!0,e.marketsTemporary||(e.marketsTemporary=e.markets))},l.submit=function(){s=n(function(){l.disabledSubmit=!0},300),a.url("?"+(t=[],e="",l.q&&""!==l.q&&t.push("q="+encodeURI(l.q)),l.dt&&t.push("date="+o("date")(l.dt,"yyyy-MM-dd")),e=0<t.length?t.join("&"):e));var e,t={searchBy:l.q,date:o("date")(l.dt,"yyyy-MM-dd")};r.asyncWithjQuery("/ajax/tippmixvsportresults",t,!0).then(function(t){i.$apply(function(){var e;for(l.isEmpty=!0,e=t.data.length;e--;)(t.data[e].sportCompetitions&&0<t.data[e].sportCompetitions.length||t.data[e].events&&0<t.data[e].events.length)&&(l.isEmpty=!1);l.isEmpty||(t.data[0].sportCompetitions[0].events[0].tooltip=!0,t.data.forEach(function(a,e){a.sportCompetitions.forEach(function(e,t){e.events.forEach(function(n,e){n.refundPeriods=[],n.markets.forEach(function(t,e){a.refundPeriods.forEach(function(e){t.marketId===e.marketId&&n.refundPeriods.push({start:e.start,end:e.end})})})})})}),l.items=t.data),n.cancel(s),l.disabledSubmit=!1})})},l.qKeypress=function(e){!l.disabledSubmitButton&&13===e.keyCode&&""!==l.q&&3<=l.q.length&&l.submit()},l.openDateDropdown=function(){l.disabledSubmit||l.disabledDateSelector||(l.dateDropdownIsOpen=!l.dateDropdownIsOpen)},l.resetDate=function(){l.dt=new Date},l.qEmpty=function(){return l.q.length<3},i.$watch(function(){return t},function(e,t){angular.isDefined(t)&&(t.isDetailsOpen=!1)}),i.$watch(function(){return l.dt},function(e,t){if(e!==t){if(null===l.dt||void 0===l.dt)return void(l.dt=new Date);l.displayDate=o("date")(l.dt,"yyyy.MM.dd")}l.dateDropdownIsOpen=!1}),i.$watch(function(){return l.q},function(e){5===e.length||6===e.length||16===e.length?l.disabledSubmitButton=!1:l.disabledSubmitButton=!0})}e.$inject=["$timeout","$location","$scope","$filter","httpService"],angular.module("tippmixCommonWidgets").controller("VSportResultsPageWidget",e)}(),function(){function e(e,t,n,a,i,s,o,r,l){var c,d,m=this,u=!1,p=null,v=null;function f(o,r){p.events.map(function(e,t){var n=e.market.outcomes.find(function(e){return e.isRecommended}),t=t===p.events.length-1,a=e.id+"-"+e.market.id+"-"+n.no,i=null,i=r?a:e.id;"add"===o?s.addItem(a,e,e.market,n,!1,t,!0,!0):s.removeItem(i,e.id)})}function g(t){m.custombetOffersOdds=null,m.expectedPrize=null;var e={id:t.events[0].id,selections:t.events.map(function(e){return{marketId:e.market.id,outcomeNo:e.market.outcomes.find(function(e){return e.isRecommended}).no}})};angular.equals(v,e)||(v=e,i({method:"POST",url:"/custombet-api/v1/custombet/calculate/cached-odds",data:JSON.stringify({event:e}),headers:{"Content-Type":"application/json"}}).success(function(e){m.custombetError=!1,m.custombetOffersOdds=e.event.odds,m.expectedPrize=r.rounding(m.custombetOffersOdds*t.stake,1)}).error(function(){return!(m.custombetError=!0)}))}m.additionDisabled=!1,m.init=function(e){var t=n.search();t.printid&&(u=!0,d=parseInt(t.printid)),a.startPolling({name:"recommendedCustombetOffers",url:"v2/tippmix/events/recommended-bets/custombet",method:"GET",pollingTime:e},function(e){c=e.recommendedBets,e.date?m.realDatetime=e.date:(e=Date.now(),e=new Date(e),m.realDatetime=e.toISOString()),p&&(v=null,g(p))})},m.fillBetslip=function(){m.additionDisabled=!1,0===s.getPrematchItemsLength()?(f("add"),s.data.prematch.globalStake=p.stake):(s.itemIsExistsForCustombetOffers(p.events[0].id)&&(m.additionDisabled=!0),o.open({template:"custombetOffersFillBetWarningDialog",showClose:!1,controller:["$scope","betslipStorage",function(e,t){e.additionDisabled=m.additionDisabled,e.remove=function(){t.removeAllPrematch(),f("add"),t.data.prematch.globalStake=p.stake,e.closeThisDialog()},e.append=function(){f("add"),t.data.prematch.globalStake=p.stake,e.closeThisDialog()}}]}))},t.$on("tab.select.custombet-offer",function(e,t,n){var a;void 0===n&&(n=m.items.findIndex(function(e){return e.name===t})),a=m.items[n].quickBetId,(p=m.items[n]).events.map(function(e){return e.recommendedOdd=e.market.outcomes.find(function(e){return e.isRecommended}).realNo}),g(p),m.printUrl=l.custombetOffersPrintUrl+"#?printid="+a}),t.$on("accordion.select.custombet-offer",function(e,t,n){m.items[n].quickBetId;(p=m.items[n]).events.map(function(e){return e.recommendedOdd=e.market.outcomes.find(function(e){return e.isRecommended}).realNo}),g(p)}),e.$on("betslip.calculateCallError",function(){f("remove")}),e.$on("betslip.calculateCallErrorNoAddItem",function(){f("remove",!0)}),t.$watch(function(){return c},function(e,t){if(e!==t){for(var n=[],a=0,i=c.length;a<i;a++){var o=c[a];u&&o.id!==d||n.push({name:o.name,quickBetId:o.id,events:o.events,stake:o.stake})}m.items=n,u&&m.items[0].quickBetId===d&&((p=m.items[0]).events.map(function(e){return e.recommendedOdd=e.market.outcomes.find(function(e){return e.isRecommended}).realNo}),g(p))}},!0)}e.$inject=["$rootScope","$scope","$location","httpService","$http","betslipStorage","ngDialog","betslipRounding","settings"],angular.module("tippmixCommonWidgets").controller("CustombetOfferWidget",e)}(),function(){function e(e,a,n,i,o,r,t){var s,l,c=this,d=!1,m={live:{name:"live",url:"v2/tippmix/events?compatibility=v1",pollingTime:3e4,eventType:"live"},upcoming:{name:"upcoming",url:"v2/tippmix/events?compatibility=v1",pollingTime:3e4,eventType:"upcomingMarketlessOpeningHours"}},u=20,p=null,v=null,f=null,g="",h=1,b=null,y=null;function S(){r.stopPolling(m.live.name),r.stopPolling(m.upcoming.name);var e=b||null,t=y||null;b&&(e=moment(o("huDate")(e)).startOf("day").format()),y&&(t=moment(o("huDate")(t)).endOf("day").format()),r.startPolling({name:m[c.tab].name,url:m[c.tab].url,pollingTime:m[c.tab].pollingTime,params:{sportId:p,competitionGroupId:v,competitionOrAliasId:f?{id:f,type:g||"competition"}:null,eventTypes:[m[c.tab].eventType],minDate:e,maxDate:t,pageSize:u,page:h}},function(e){(s=e).date&&(c.realDatetime=e.date),d&&(n.$broadcast("filter.search.ready"),i.cancel(l),c.disabled=!1,d=!1)})}c.pageCount=1,c.tab="live",c.disabledPrev=!1,c.disabledNext=!1,c.currentPage="",c.pages=[],c.disabled=!1,c.selectedDay=0,c.upcomingTabs=Array.from({length:7},function(e,t){return{date:new Date(Date.now()+864e5*t)}}),c.realDatetime=Date.now(),c.init=function(e,t){var n=a.search();n.sportid&&(p=parseInt(n.sportid)||null),n.countryid&&(v=parseInt(n.countryid)||null),n.competitionid&&(f=parseInt(n.competitionid)||null),n.competitiontype&&(g=n.competitiontype),n.tab&&(c.tab=n.tab),a.search("tab",c.tab),m.live.pollingTime=e,m.upcoming.pollingTime=t},c.prevPage=function(){c.disabledPrev||1===h||--h},c.nextPage=function(){c.disabledNext||h===c.pageCount||(h+=1)},c.selectDay=function(e){n.$broadcast("tab.select.upcoming.mobile","",e)},e.$on("tab.select.upcoming",function(e,t,n,a){a=a.replace(/"/g,""),a=new Date(a);y=b=a,S()}),e.$on("tab.select.upcoming.mobile",function(e,t,n){b=c.upcomingTabs[n].date,y=c.upcomingTabs[n].date,S()}),n.$on("filter.search",function(e,t){p=t.sportId,v=t.countryId,f=t.competitionId,h=1,a.search("page",h),a.search("tab",c.tab),S(),d=!0,l=i(function(){c.disabled=!0})}),e.$watch(function(){return s},function(e,t){if(e!==t){if(c.data=s,c.pageCount=c.data._meta.pageCount,c.disabledPrev=!1,1===c.data._meta.currentPage&&(c.disabledPrev=!0),h===c.pageCount)c.disabledNext=!0;else{c.disabledNext=!1;for(var n=[],a=0;a<c.pageCount;a++)n.push(a+1);c.pages=n}c.page=h}},!0),e.$watch(function(){return h},function(e,t){e!==t&&(a.search("page",h),S())}),e.$watch(function(){return c.tab},function(e,t){e!==t&&(y=b=null,c.selectedDay=0,a.url("?tab="+c.tab)),"live"===c.tab&&S()},!0),e.$watch(function(){return c.page},function(e,t){e!==t&&(h=c.page)})}e.$inject=["$scope","$location","$rootScope","$timeout","$filter","httpService","settings"],angular.module("tippmixCommonWidgets").controller("LiveWidget",e)}();